(function(n,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):n.Ractive=t()})(this,function(){"use strict";function hr(n){var t;if(n&&typeof n!="boolean")return typeof window=="undefined"||!document||!n?null:n.nodeType?n:typeof n=="string"&&(t=document.getElementById(n),!t&&document.querySelector&&(t=document.querySelector(n)),t&&t.nodeType)?t:n[0]&&n[0].nodeType?n[0]:null}function se(n){return n&&typeof n.parentNode!="unknown"&&n.parentNode&&n.parentNode.removeChild(n),n}function he(n){return n==null||!n.toString?"":n}function si(n){for(var i,r,u=arguments.length,f=Array(u>1?u-1:0),t=1;t<u;t++)f[t-1]=arguments[t];while(r=f.shift())for(i in r)gt.call(r,i)&&(n[i]=r[i]);return n}function bot(n){for(var i=arguments.length,r=Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return r.forEach(function(t){for(var i in t)!t.hasOwnProperty(i)||i in n||(n[i]=t[i])}),n}function f(n){return ce.call(n)==="[object Array]"}function le(n){return kot.test(ce.call(n))}function lt(n,t){return n===null&&t===null?!0:typeof n=="object"||typeof t=="object"?!1:n===t}function at(n){return!isNaN(parseFloat(n))&&isFinite(n)}function rt(n){return n&&ce.call(n)==="[object Object]"}function ye(n,t){return n.replace(/%s/g,function(){return t.shift()})}function st(n){for(var i=arguments.length,r=Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];n=ye(n,r);throw new Error(n);}function ta(){s.DEBUG&&ve.apply(null,arguments)}function dot(n){for(var i=arguments.length,r=Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];n=ye(n,r);lu(n,r)}function ia(n){for(var i=arguments.length,r=Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];(n=ye(n,r),ae[n])||(ae[n]=!0,lu(n,r))}function o(){s.DEBUG&&dot.apply(null,arguments)}function b(){s.DEBUG&&ia.apply(null,arguments)}function lr(n,t,i){var r=pe(n,t,i);return r?r[n][i]:null}function pe(n,t,i){while(t){if(i in t[n])return t;if(t.isolated)return null;t=t.parent}}function we(n){return function(){return n}}function nst(n){var i,r,e,f,t,u;for(i=n.split("."),(r=yr[i.length])||(r=tst(i.length)),t=[],e=function(n,t){return n?"*":i[t]},f=r.length;f--;)u=r[f].map(e).join("."),t.hasOwnProperty(u)||(t.push(u),t[u]=!0);return t}function tst(n){var r="",f,t,u,e,i;if(!yr[n]){for(u=[];r.length<n;)r+=1;for(f=parseInt(r,2),e=function(n){return n==="1"},i=0;i<=f;i+=1){for(t=i.toString(2);t.length<n;)t="0"+t;u[i]=Array.prototype.map.call(t,e)}yr[n]=u}return yr[n]}function fa(n,t,i,r){var u=n[t];if(!u||!u.equalsOrStartsWith(r)&&u.equalsOrStartsWith(i))return n[t]=u?u.replace(i,r):r,!0}function ust(n){var t=n.slice(2);return n[1]==="i"?at(t)?+t:t:t}function t(n){return n==null?n:(be.hasOwnProperty(n)||(be[n]=new ua(n)),be[n])}function au(n,i){function o(t,i){var e,r,u;return i.isRoot?u=[].concat(Object.keys(n.viewmodel.data),Object.keys(n.viewmodel.mappings),Object.keys(n.viewmodel.computations)):(e=n.viewmodel.wrapped[i.str],r=e?e.get():n.viewmodel.get(i),u=r?Object.keys(r):null),u&&u.forEach(function(n){n==="_ractive"&&f(r)||t.push(i.join(n))}),t}for(var u,e=i.str.split("."),r=[vt];u=e.shift();)u==="*"?r=r.reduce(o,[]):r[0]===vt?r[0]=t(u):r=r.map(fst(u));return r}function fst(n){return function(t){return t.join(n)}}function ut(n){return n?n.replace(ist,".$1"):""}function ea(n,i,r){if(typeof i!="string"||!at(r))throw new Error("Bad arguments");var u=undefined,f=undefined;if(/\*/.test(i))return f={},au(n,t(ut(i))).forEach(function(t){var i=n.viewmodel.get(t);if(!at(i))throw new Error(ke);f[t.str]=i+r}),n.set(f);if(u=n.get(i),!at(u))throw new Error(ke);return n.set(i,+u+r)}function est(n,t){return ea(this,n,t===undefined?1:+t)}function h(n){this.event=n;this.method="on"+n;this.deprecate=sa[n]}function ha(n,t){var i=n.indexOf(t);i===-1&&n.push(t)}function ca(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]==t)return!0;return!1}function to(n,t){var i;if(!f(n)||!f(t)||n.length!==t.length)return!1;for(i=n.length;i--;)if(n[i]!==t[i])return!1;return!0}function la(n){return typeof n=="string"?[n]:n===undefined?[]:n}function yt(n){return n[n.length-1]}function v(n,t){var i=n.indexOf(t);i!==-1&&n.splice(i,1)}function io(n){for(var i=[],t=n.length;t--;)i[t]=n[t];return i}function va(n){setTimeout(n,0)}function sst(n,t){return function(){for(var i;i=n.shift();)i(t)}}function ya(n,t,i,r){var f,u,o,s;if(t===n)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(t instanceof k)t.then(i,r);else if(t&&(typeof t=="object"||typeof t=="function")){try{f=t.then}catch(e){r(e);return}if(typeof f=="function"){o=function(t){u||(u=!0,ya(n,t,i,r))};s=function(n){u||(u=!0,r(n))};try{f.call(t,o,s)}catch(e){if(!u){r(e);u=!0;return}}}else i(t)}else i(t)}function vu(n,i,r){var u;return i=ut(i),i.substr(0,2)==="~/"?(u=t(i.substring(2)),pa(n,u.firstKey,r)):i[0]==="."?(u=hst(uo(r),i),u&&pa(n,u.firstKey,r)):u=fo(n,t(i),r),u}function hst(n,i){var r;if(n!=undefined&&typeof n!="string"&&(n=n.str),i===".")return t(n);if(r=n?n.split("."):[],i.substr(0,3)==="../"){while(i.substr(0,3)==="../"){if(!r.length)throw new Error('Could not resolve reference - too many "../" prefixes');r.pop();i=i.substring(3)}return r.push(i),t(r.join("."))}return n?t(n+i.replace(/^\.\//,".")):t(i.replace(/^\.\/?/,""))}function fo(n,i,r,u){var o,f,e,s,h;if(i.isRoot)return i;for(f=i.firstKey;r;)if((o=r.context,r=r.parent,o)&&(s=!0,e=n.viewmodel.get(o),e&&(typeof e=="object"||typeof e=="function")&&f in e))return o.join(i.str);return wa(n.viewmodel,f)?i:n.parent&&!n.isolated&&(s=!0,r=n.component.parentFragment,f=t(f),h=fo(n.parent,f,r,!0))?(n.viewmodel.map(f,{origin:n.parent.viewmodel,keypath:h}),i):!u&&!s?(n.viewmodel.set(i,undefined),i):void 0}function pa(n,i){var r;!n.parent||n.isolated||wa(n.viewmodel,i)||(i=t(i),(r=fo(n.parent,i,n.component.parentFragment,!0))&&n.viewmodel.map(i,{origin:n.parent.viewmodel,keypath:r}))}function wa(n,t){return t===""||t in n.data||t in n.computations||t in n.mappings}function ba(n){n.teardown()}function ft(n){n.unbind()}function cst(n){n.unrender()}function lst(n){n.detach()}function ast(n){n.detachNodes()}function yu(n){!n.ready||n.outros.length||n.outroChildren||(n.outrosComplete||(n.parent?n.parent.decrementOutros(n):n.detachNodes(),n.outrosComplete=!0),n.intros.length||n.totalChildren||(typeof n.callback=="function"&&n.callback(),n.parent&&n.parent.decrementTotal()))}function da(){for(var n,t,i;r.ractives.length;)t=r.ractives.pop(),i=t.viewmodel.applyChanges(),i&&ka.fire(t,i);for(vst(),n=0;n<r.views.length;n+=1)r.views[n].update();for(r.views.length=0,n=0;n<r.tasks.length;n+=1)r.tasks[n]();return r.tasks.length=0,r.ractives.length?da():void 0}function vst(){for(var n,r,i,t=ni.length;t--;){if(n=ni[t],n.keypath){ni.splice(t,1);continue}(r=vu(n.root,n.ref,n.parentFragment))&&((i||(i=[])).push({item:n,keypath:r}),ni.splice(t,1))}i&&i.forEach(yst)}function yst(n){n.item.resolve(n.keypath)}function pst(n,t,i){var r,l,e,w,o,v,y,u,f,b,s,p,h,c;if(r=new pt(function(n){return l=n}),typeof n=="object"){i=t||{};v=i.easing;y=i.duration;o=[];u=i.step;f=i.complete;(u||f)&&(s={},i.step=null,i.complete=null,b=function(n){return function(t,i){s[n]=i}});for(e in n)n.hasOwnProperty(e)&&((u||f)&&(p=b(e),i={easing:v,duration:y},u&&(i.step=p)),i.complete=f?p:a,o.push(so(this,e,n[e],i)));return c={easing:v,duration:y},u&&(c.step=function(n){return u(n,s)}),f&&r.then(function(n){return f(n,s)}),c.complete=l,h=so(this,null,null,c),o.push(h),r.stop=function(){for(var n;n=o.pop();)n.stop();h&&h.stop()},r}return i=i||{},i.complete&&r.then(i.complete),i.complete=l,w=so(this,n,t,i),r.stop=function(){return w.stop()},r}function so(n,i,r,u){var f,s,e,o;return(i&&(i=t(ut(i))),i!==null&&(o=n.viewmodel.get(i)),oo.abort(i,n),lt(o,r))?(u.complete&&u.complete(u.to),tv):(u.easing&&(f=typeof u.easing=="function"?u.easing:n.easing[u.easing],typeof f!="function"&&(f=null)),s=u.duration===undefined?400:u.duration,e=new ga({keypath:i,from:o,to:r,root:n,duration:s,easing:f,interpolator:u.interpolator,step:u.step,complete:u.complete}),oo.add(e),n._animations.push(e),e)}function wst(){return this.detached?this.detached:(this.el&&v(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),rv.fire(this),this.detached)}function bst(n){return this.el?this.fragment.find(n):null}function kst(n,t){var i;return i=this._isComponentQuery?!this.selector||n.name===this.selector:n.node?tt(n.node,this.selector):null,i?(this.push(n.node||n.instance),t||this._makeDirty(),!0):void 0}function ov(n){var t;return(t=n.parentFragment)?t.owner:n.component&&(t=n.component.parentFragment)?t.owner:void 0}function sv(n){for(var i=[n],t=ov(n);t;)i.push(t),t=ov(t);return i}function hv(n,t,i,r){var u=[];return(oi(u,{selector:{value:t},live:{value:i},_isComponentQuery:{value:r},_test:{value:fv}}),!i)?u:(oi(u,{cancel:{value:ev},_root:{value:n},_sort:{value:gst},_makeDirty:{value:nht},_remove:{value:tht},_dirty:{value:!1,writable:!0}}),u)}function iht(n,t){var r,i;return this.el?(t=t||{},r=this._liveQueries,i=r[n])?t&&t.live?i:i.slice():(i=hv(this,n,!!t.live,!1),i.live&&(r.push(n),r["_"+n]=i),this.fragment.findAll(n,i),i):[]}function rht(n,t){var r,i;return(t=t||{},r=this._liveComponentQueries,i=r[n])?t&&t.live?i:i.slice():(i=hv(this,n,!!t.live,!0),i.live&&(r.push(n),r["_"+n]=i),this.fragment.findAllComponents(n,i),i)}function uht(n){return this.fragment.findComponent(n)}function fht(n){return this.container?this.container.component&&this.container.component.name===n?this.container:this.container.findContainer(n):null}function eht(n){return this.parent?this.parent.component&&this.parent.component.name===n?this.parent:this.parent.findParent(n):null}function wr(n,i){var r=arguments[2]===undefined?{}:arguments[2],u;i&&(r.event?r.event.name=i:r.event={name:i,_noArg:!0},u=t(i).wildcardMatches(),pv(n,u,r.event,r.args,!0))}function pv(n,i,r,u){var h=arguments[4]===undefined?!1:arguments[4],e,f,o=!0,s;for(pr.enqueue(n,r),f=i.length;f>=0;f--)e=n._subs[i[f]],e&&(o=oht(n,e,r,u)&&o);pr.dequeue(n);n.parent&&o&&(h&&n.component&&(s=n.component.name+"."+i[i.length-1],i=t(s).wildcardMatches(),r&&(r.component=n)),pv(n.parent,i,r,u))}function oht(n,t,i,r){var u=null,e=!1,f,o;for(i&&!i._noArg&&(r=[i].concat(r)),t=t.slice(),f=0,o=t.length;f<o;f+=1)t[f].apply(n,r)===!1&&(e=!0);return i&&!i._noArg&&e&&(u=i.original)&&(u.preventDefault&&u.preventDefault(),u.stopPropagation&&u.stopPropagation()),!e}function sht(n){var t={args:Array.prototype.slice.call(arguments,1)};wr(this,n,t)}function hht(n){var i;return n=t(ut(n)),i=this.viewmodel.get(n,kv),i===undefined&&this.parent&&!this.isolated&&vu(this,n.str,this.component.parentFragment)&&(i=this.viewmodel.get(n)),i}function cht(n,t){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(n=hr(n),t=hr(t)||null,!n)throw new Error("You must specify a valid target to insert into");n.insertBefore(this.detach(),t);this.el=n;(n.__ractive_instances__||(n.__ractive_instances__=[])).push(this);this.detached=null;ny(this)}function ny(n){gv.fire(n);n.findAllComponents("*").forEach(function(n){ny(n.instance)})}function lht(i,r,u){var e,o;return(i=t(ut(i)),e=this.viewmodel.get(i),!f(e)||!f(r))?this.set(i,r,u&&u.complete):(o=n.start(this,!0),this.viewmodel.merge(i,e,r,u),n.end(),o)}function iy(n,t){var r,i;return r=au(n,t),i={},r.forEach(function(t){i[t.str]=n.get(t.str)}),i}function ao(n,i,r,u){var f,e,o;return i=t(ut(i)),u=u||uy,i.isPattern?(f=new lo(n,i,r,u),n.viewmodel.patternObservers.push(f),e=!0):f=new co(n,i,r,u),f.init(u.init),n.viewmodel.register(i,f,e?"patternObservers":"observers"),f.ready=!0,{cancel:function(){var t;o||(e?(t=n.viewmodel.patternObservers.indexOf(f),n.viewmodel.patternObservers.splice(t,1),n.viewmodel.unregister(i,f,"patternObservers")):n.viewmodel.unregister(i,f,"observers"),o=!0)}}}function aht(n,t,i){var r,u,f,e;if(rt(n)){i=t;u=n;r=[];for(n in u)u.hasOwnProperty(n)&&(t=u[n],r.push(this.observe(n,t,i)));return{cancel:function(){while(r.length)r.pop().cancel()}}}if(typeof n=="function")return i=t,t=n,n="",ao(this,n,t,i);if(f=n.split(" "),f.length===1)return ao(this,n,t,i);for(r=[],e=f.length;e--;)n=f[e],n&&r.push(ao(this,n,t,i));return{cancel:function(){while(r.length)r.pop().cancel()}}}function vht(n,t,i){var r=this.observe(n,function(){t.apply(this,arguments);r.cancel()},{init:!1,defer:i&&i.defer});return r}function pht(n,t){var i=this,r;if(n)r=n.split(" ").map(oy).filter(sy),r.forEach(function(n){var r,u;(r=i._subs[n])&&(t?(u=r.indexOf(t),u!==-1&&r.splice(u,1)):i._subs[n]=[])});else for(n in this._subs)delete this._subs[n];return this}function wht(n,t){var r=this,u,i,f;if(typeof n=="object"){u=[];for(i in n)n.hasOwnProperty(i)&&u.push(this.on(i,n[i]));return{cancel:function(){for(var n;n=u.pop();)n.cancel()}}}return f=n.split(" ").map(oy).filter(sy),f.forEach(function(n){(r._subs[n]||(r._subs[n]=[])).push(t)}),{cancel:function(){return r.off(n,t)}}}function bht(n,t){var i=this.on(n,function(){t.apply(this,arguments);i.cancel()});return i}function ly(n,t,i){var u,e,f=[],o,h,s,r;if(u=kht(n,t,i),!u)return null;for(e=n.length,s=u.length-2-u[1],o=Math.min(e,u[0]),h=o+u[1],r=0;r<o;r+=1)f.push(r);for(;r<h;r+=1)f.push(-1);for(;r<e;r+=1)f.push(r+s);return f.touchedFrom=s!==0?u[0]:n.length,f}function kht(n,t,i){switch(t){case"splice":for(i[0]!==undefined&&i[0]<0&&(i[0]=n.length+Math.max(i[0],-n.length));i.length<2;)i.push(0);return i[1]=Math.min(i[1],n.length-i[0]),i;case"sort":case"reverse":return null;case"pop":return n.length?[n.length-1,1]:[0,0];case"push":return[n.length,0].concat(i);case"shift":return[0,n.length?1:0];case"unshift":return[0,0].concat(i)}}function fct(t,i){var u=this,f,e,o,r;if(o=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),f=n.start(this,!0),n.scheduleTask(function(){return rct.fire(u)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");return t=hr(t)||this.el,i=hr(i)||this.anchor,this.el=t,this.anchor=i,!this.append&&t&&(r=t.__ractive_instances__,r&&r.length&&ect(r),t.innerHTML=""),this.cssId&&pu.apply(),t&&((e=t.__ractive_instances__)?e.push(this):t.__ractive_instances__=[this],i?t.insertBefore(this.fragment.render(),i):t.appendChild(this.fragment.render())),n.end(),this.transitionsEnabled=o,f.then(function(){return uct.fire(u)})}function ect(n){n.splice(0,n.length).forEach(ba)}function oct(n,t){for(var i=n.slice(),r=t.length;r--;)~i.indexOf(t[r])||i.push(t[r]);return i}function act(n,t){var i,r;return i='[data-ractive-css~="{'+t+'}"]',r=function(n){for(var u,e,o,f,s,t,h=[],r=[];u=cct.exec(n);)r.push({str:u[0],base:u[1],modifiers:u[2]});for(o=r.map(yct),t=r.length;t--;)s=o.slice(),e=r[t],s[t]=e.base+i+e.modifiers||"",f=o.slice(),f[t]=i+" "+f[t],h.push(s.join(" "),f.join(" "));return h.join(", ")},py.test(n)?n.replace(py,i):n.replace(hct,"").replace(sct,function(n,t){var i,u;return lct.test(t)?n:(i=t.split(",").map(vct),u=i.map(r).join(", ")+" ",n.replace(t,u))})}function vct(n){return n.trim?n.trim():n.replace(/^\s+/,"").replace(/\s+$/,"")}function yct(n){return n.str}function pct(n){n&&n.constructor!==Object&&(typeof n=="function"||(typeof n!="object"?st("data option must be an object or a function, `"+n+"` is not valid"):o("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")))}function by(n,t){pct(t);var i=typeof n=="function",r=typeof t=="function";return(t||i||(t={}),!i&&!r)?dy(t,n):function(){var u=r?ky(t,this):t,f=i?ky(n,this):n;return dy(u,f)}}function ky(n,t){var i=n.call(t);if(i)return typeof i!="object"&&st("Data function must return an object"),i.constructor!==Object&&b("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),i}function dy(n,t){if(n&&t){for(var i in t)i in n||(n[i]=t[i]);return n}return n||t}function ilt(n){var t,i,r;return n.matchString("=")?(t=n.pos,n.allowWhitespace(),i=n.matchPattern(ap),!i)?(n.pos=t,null):n.matchPattern(tlt)?(r=n.matchPattern(ap),!r)?(n.pos=t,null):(n.allowWhitespace(),!n.matchString("="))?(n.pos=t,null):[i,r]:null:null}function rlt(n){var t;return(t=n.matchPattern(vp))?{t:op,v:t}:null}function yi(n){var i,t;if(n.interpolate[n.inside]===!1)return null;for(t=0;t<n.tags.length;t+=1)if(i=ult(n,n.tags[t]))return i}function ult(n,t){var r,i,e,u,f;if(r=n.pos,n.matchString("\\"+t.open)){if(r===0||n.str[r-1]!=="\\")return t.open}else if(!n.matchString(t.open))return null;if(i=ilt(n))return n.matchString(t.close)?(t.open=i[0],t.close=i[1],n.sortMustacheTags(),yp):null;for(n.allowWhitespace(),n.matchString("/")&&(n.pos-=1,f=n.pos,fs(n)?n.pos=f:(n.pos=f-t.close.length,n.error("Attempted to close a section that wasn't open"))),u=0;u<t.readers.length;u+=1)if(e=t.readers[u],i=e(n,t))return t.isStatic&&(i.s=!0),n.includeLinePositions&&(i.p=n.getLinePos(r)),i;return n.pos=r,null}function elt(n){var t;return(t=n.matchPattern(flt))?{t:go,v:t}:null}function olt(n){var t=n.remaining();return t.substr(0,4)==="true"?(n.pos+=4,{t:ts,v:"true"}):t.substr(0,5)==="false"?(n.pos+=5,{t:ts,v:"false"}):null}function tw(n){var t;return(t=es(n))?clt.test(t.v)?t.v:'"'+t.v.replace(/"/g,'\\"')+'"':(t=wp(n))?t.v:(t=n.matchPattern(nw))?t:void 0}function llt(n){var t,i,r;return(t=n.pos,n.allowWhitespace(),i=tw(n),i===null)?(n.pos=t,null):(n.allowWhitespace(),!n.matchString(":"))?(n.pos=t,null):(n.allowWhitespace(),r=c(n),r===null)?(n.pos=t,null):{t:hp,k:i,v:r}}function rw(n){var u,t,i,r;return(u=n.pos,i=iw(n),i===null)?null:(t=[i],n.matchString(","))?(r=rw(n),!r)?(n.pos=u,null):t.concat(r):t}function os(n){function f(n){t.push(n)}var u,t,i,r;return(u=n.pos,n.allowWhitespace(),i=c(n),i===null)?null:(t=[i],n.allowWhitespace(),n.matchString(",")&&(r=os(n),r===null&&n.error(pi),r.forEach(f)),t)}function alt(n){return wp(n)||olt(n)||es(n)||uw(n)||fw(n)||fs(n)}function cw(n){var u,i,t,f,r,e;return(u=n.pos,t=n.matchPattern(/^@(?:keypath|index|key)/),t||(i=n.matchPattern(ew)||"",t=!i&&n.relaxedNames&&n.matchPattern(hw)||n.matchPattern(sw),t||i!=="."||(i="",t=".")),!t)?null:!i&&!n.relaxedNames&&ow.test(t)?(n.pos=u,null):!i&&ss.test(t)?(f=ss.exec(t)[0],n.pos=u+f.length,{t:sp,v:f}):(r=(i||"")+ut(t),n.matchString("(")&&(e=r.lastIndexOf("."),e!==-1?(r=r.substr(0,e),n.pos=u+r.length):n.pos-=1),{t:ri,n:r.replace(/^this\./,"./").replace(/^this$/,".")})}function vlt(n){var i,t;return(i=n.pos,!n.matchString("("))?null:(n.allowWhitespace(),t=c(n),t||n.error(pi),n.allowWhitespace(),n.matchString(")")||n.error(pp),{t:tf,x:t})}function ylt(n){var r,i,t;if(r=n.pos,n.allowWhitespace(),n.matchString(".")){if(n.allowWhitespace(),i=n.matchPattern(nw))return{t:gu,n:i};n.error("Expected a property name")}return n.matchString("[")?(n.allowWhitespace(),t=c(n),t||n.error(pi),n.allowWhitespace(),n.matchString("]")||n.error("Expected ']'"),{t:gu,x:t}):null}function plt(n){var u,t,i,r;return(t=ww(n),!t)?null:(u=n.pos,n.allowWhitespace(),!n.matchString("?"))?(n.pos=u,t):(n.allowWhitespace(),i=c(n),i||n.error(pi),n.allowWhitespace(),n.matchString(":")||n.error('Expected ":"'),n.allowWhitespace(),r=c(n),r||n.error(pi),{t:cp,o:[t,i,r]})}function c(n){return kw(n)}function gr(n){function t(n){switch(n.t){case ts:case sp:case go:case op:return n.v;case ns:return JSON.stringify(String(n.v));case fp:return"["+(n.m?n.m.map(t).join(","):"")+"]";case ep:return"{"+(n.m?n.m.map(t).join(","):"")+"}";case hp:return n.k+":"+t(n.v);case nf:return(n.s==="typeof"?"typeof ":n.s)+t(n.o);case rs:return t(n.o[0])+(n.s.substr(0,2)==="in"?" "+n.s+" ":n.s)+t(n.o[1]);case lp:return t(n.x)+"("+(n.o?n.o.map(t).join(","):"")+")";case tf:return"("+t(n.x)+")";case is:return t(n.x)+t(n.r);case gu:return n.n?"."+n.n:"["+t(n.x)+"]";case cp:return t(n.o[0])+"?"+t(n.o[1])+":"+t(n.o[2]);case ri:return"_"+i.indexOf(n.n);default:throw new Error("Expected legal JavaScript");}}var i;return wi(n,i=[]),{r:i,s:t(n)}}function wi(n,t){var r,i;if(n.t===ri&&t.indexOf(n.n)===-1&&t.unshift(n.n),i=n.o||n.m,i)if(rt(i))wi(i,t);else for(r=i.length;r--;)wi(i[r],t);n.x&&wi(n.x,t);n.r&&wi(n.r,t);n.v&&wi(n.v,t)}function kt(n,t){var i;if(n){while(n.t===tf&&n.x)n=n.x;return n.t===ri?t.r=n.n:n.t===go&&dw.test(n.v)?t.r=n.v:(i=wlt(n))?t.rx=i:t.x=gr(n),t}}function wlt(n){for(var i=[],t;n.t===is&&n.r.t===gu;)t=n.r,t.x?t.x.t===ri?i.unshift(t.x):i.unshift(gr(t.x)):i.unshift(t.n),n=n.x;return n.t!==ri?null:{r:n.n,m:i}}function blt(n,t){var r=c(n),i;return r?(n.matchString(t.close)||n.error("Expected closing delimiter '"+t.close+"'"),i={t:bu},kt(r,i),i):null}function gw(n,t){var i,r;return n.matchString("&")?(n.allowWhitespace(),i=c(n),!i)?null:(n.matchString(t.close)||n.error("Expected closing delimiter '"+t.close+"'"),r={t:bu},kt(i,r),r):null}function klt(n,t){var f,e,r,u,i;return(f=n.pos,!n.matchString(">"))?null:(n.allowWhitespace(),e=n.pos,n.relaxedNames=!0,r=c(n),n.relaxedNames=!1,n.allowWhitespace(),u=c(n),n.allowWhitespace(),!r)?null:(i={t:ku},kt(r,i),n.allowWhitespace(),u&&(i={t:et,n:vi,f:[i]},kt(u,i)),n.matchString(t.close)||n.error("Expected closing delimiter '"+t.close+"'"),i)}function dlt(n,t){var i;return n.matchString("!")?(i=n.remaining().indexOf(t.close),i!==-1?(n.pos+=i+t.close.length,{t:li}):void 0):null}function glt(n,t){var u,r,i;if(u=n.pos,r=c(n),!r)return null;for(i=0;i<t.length;i+=1)if(n.remaining().substr(0,t[i].length)===t[i])return r;return n.pos=u,cw(n)}function tb(n,t){var r,i,u,f;r=n.pos;try{i=glt(n,[t.close])}catch(e){f=e}if(!i){if(n.str.charAt(r)==="!")return n.pos=r,null;if(f)throw f;}if(!n.matchString(t.close)&&(n.error("Expected closing delimiter '"+t.close+"' after reference"),!i)){if(n.nextChar()==="!")return null;n.error("Expected expression or legal reference")}return u={t:kr},kt(i,u),u}function nat(n,t){var u,i,r;return n.matchPattern(ib)?(u=n.pos,i=n.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),n.allowWhitespace(),n.matchString(t.close)||n.error("expected legal partial name"),r={t:du},i&&(r.n=i),r):null}function hs(n,t){var r,u,i,f;return(r=n.pos,!n.matchString(t.open))?null:(n.allowWhitespace(),!n.matchString("/"))?(n.pos=r,null):(n.allowWhitespace(),u=n.remaining(),i=u.indexOf(t.close),i!==-1)?(f={t:bct,r:u.substr(0,i).split(" ")[0]},n.pos+=i,n.matchString(t.close)||n.error("Expected closing delimiter '"+t.close+"'"),f):(n.pos=r,null)}function tat(n,t){var i=n.pos;return n.matchString(t.open)?n.matchPattern(ub)?(n.matchString(t.close)||n.error("Expected closing delimiter '"+t.close+"'"),{t:gct}):(n.pos=i,null):null}function iat(n,t){var r=n.pos,i;return n.matchString(t.open)?n.matchPattern(eb)?(i=c(n),n.matchString(t.close)||n.error("Expected closing delimiter '"+t.close+"'"),{t:nlt,x:i}):(n.pos=r,null):null}function sb(n,t){var y,f,i,r,e,h,l,u,o,p,a,s,v;if(y=n.pos,n.matchString("^"))i={t:et,f:[],n:bt};else if(n.matchString("#"))i={t:et,f:[]},n.matchString("partial")&&(n.pos=y-n.standardDelimiters[0].length,n.error("Partial definitions can only be at the top level of the template, or immediately inside components")),(l=n.matchPattern(fat))&&(s=l,i.n=ob[l]);else return null;n.allowWhitespace();f=c(n);f||n.error("Expected expression");(a=n.matchPattern(rat))&&(v=undefined,i.i=(v=n.matchPattern(uat))?a+","+v:a);n.allowWhitespace();n.matchString(t.close)||n.error("Expected closing delimiter '"+t.close+"'");n.sectionDepth+=1;e=i.f;o=[];do if(r=hs(n,t))s&&r.r!==s&&n.error("Expected "+t.open+"/"+s+""+t.close),n.sectionDepth-=1,p=!0;else if(r=fb(n,t))i.n===bt&&n.error("{{else}} not allowed in {{#unless}}"),h&&n.error("illegal {{elseif...}} after {{else}}"),u||(u=hb(f,i.n)),u.f.push({t:et,n:ai,x:gr(cs(o.concat(r.x))),f:e=[]}),o.push(cb(r.x));else if(r=rb(n,t))i.n===bt&&n.error("{{else}} not allowed in {{#unless}}"),h&&n.error("there can only be one {{else}} block, at the end of a section"),h=!0,u?u.f.push({t:et,n:ai,x:gr(cs(o)),f:e=[]}):(u=hb(f,i.n),e=u.f);else{if(r=n.read(gi),!r)break;e.push(r)}while(!p);return u&&(i.n===vi&&(i.n=us),i.l=u),kt(f,i),i.f.length||delete i.f,i}function hb(n,t){var i;return t===vi?(i={t:et,n:ai,f:[]},kt(cb(n),i)):(i={t:et,n:bt,f:[]},kt(n,i)),i}function cb(n){return n.t===nf&&n.s==="!"?n.o:{t:nf,s:"!",o:ls(n)}}function cs(n){return n.length===1?n[0]:{t:rs,s:"&&",o:[ls(n[0]),ls(cs(n.slice(1)))]}}function ls(n){return{t:tf,x:n}}function eat(n){var u,f,i,t,r;return(u=n.pos,!n.matchString(lb))?null:(i=n.remaining(),t=i.indexOf(ab),t===-1&&n.error("Illegal HTML - expected closing comment sequence ('-->')"),f=i.substr(0,t),n.pos+=t+3,r={t:li,c:f},n.includeLinePositions&&(r.p=n.getLinePos(u)),r)}function vs(n){return n.replace(pb,function(n,t){var i;return(i=t[0]!=="#"?as[t]:t[1]==="x"?parseInt(t.substring(2),16):parseInt(t.substring(1),10),!i)?n:String.fromCharCode(oat(i))})}function oat(n){return n?n===10?32:n<128?n:n<=159?yb[n-128]:n<55296?n:n<=57343?65533:n<=65535?n:65533:65533}function ys(n){return n.replace(kb,"&amp;").replace(wb,"&lt;").replace(bb,"&gt;")}function di(n){return typeof n=="string"}function hat(n){return n.t===li||n.t===tp}function db(n){return(n.t===et||n.t===wct)&&n.f}function ht(n,t,i,r,u){var o,e,l,a,v,h,c,s;for(sat(n),o=n.length;o--;)e=n[o],e.exclude?n.splice(o,1):t&&e.t===li&&n.splice(o,1);for(aat(n,r,u),o=n.length;o--;){if(e=n[o],e.f&&(v=i||e.t===dr&&yat.test(e.e),v||(l=n[o-1],a=n[o+1],(!l||typeof l=="string"&&wat.test(l))&&(h=!0),(!a||typeof a=="string"&&pat.test(a))&&(c=!0)),ht(e.f,t,v,h,c)),e.l&&(ht(e.l.f,t,i,h,c),n.splice(o+1,0,e.l),delete e.l),e.a)for(s in e.a)e.a.hasOwnProperty(s)&&typeof e.a[s]!="string"&&ht(e.a[s],t,i,h,c);if(e.m&&ht(e.m,t,i,h,c),e.v)for(s in e.v)e.v.hasOwnProperty(s)&&(f(e.v[s].n)&&ht(e.v[s].n,t,i,h,c),f(e.v[s].d)&&ht(e.v[s].d,t,i,h,c))}for(o=n.length;o--;)typeof n[o]=="string"&&(typeof n[o+1]=="string"&&(n[o]=n[o]+n[o+1],n.splice(o+1,1)),i||(n[o]=n[o].replace(vat," ")),n[o]===""&&n.splice(o,1))}function bat(n){var i,t;if(i=n.pos,!n.matchString("<\/"))return null;if(t=n.matchPattern(gb))return n.inside&&t!==n.inside?(n.pos=i,null):{t:dct,e:t};n.pos-=2;n.error("Illegal closing tag")}function gat(n){var t,i,r;return(n.allowWhitespace(),i=n.matchPattern(kat),!i)?null:(t={name:i},r=nvt(n),r!=null&&(t.value=r),t)}function nvt(n){var i,r,u,t;return(i=n.pos,/[=\/>\s]/.test(n.nextChar())||n.error("Expected `=`, `/`, `>` or whitespace"),n.allowWhitespace(),!n.matchString("="))?(n.pos=i,null):(n.allowWhitespace(),r=n.pos,u=n.sectionDepth,t=tk(n,"'")||tk(n,'"')||tvt(n),t===null&&n.error("Expected valid attribute value"),n.sectionDepth!==u&&(n.pos=r,n.error("An attribute value must contain as many opening section tags as closing section tags")),!t.length)?"":t.length===1&&typeof t[0]=="string"?vs(t[0]):t}function nk(n){var i,t,r,u,f;return(i=n.pos,t=n.matchPattern(dat),!t)?null:(r=t,u=n.tags.map(function(n){return n.open}),(f=ps(r,u))!==-1&&(t=t.substr(0,f),n.pos=i+t.length),t)}function tvt(n){var t,i;for(n.inAttribute=!0,t=[],i=yi(n)||nk(n);i!==null;)t.push(i),i=yi(n)||nk(n);return t.length?(n.inAttribute=!1,t):null}function tk(n,t){var u,r,i;if(u=n.pos,!n.matchString(t))return null;for(n.inAttribute=t,r=[],i=yi(n)||ik(n,t);i!==null;)r.push(i),i=yi(n)||ik(n,t);return n.matchString(t)?(n.inAttribute=!1,r):(n.pos=u,null)}function ik(n,t){var f,i,r,u;return(f=n.pos,r=n.remaining(),u=n.tags.map(function(n){return n.open}),u.push(t),i=ps(r,u),i===-1&&n.error("Quoted attribute value must have a closing quote"),!i)?null:(n.pos+=i,r.substr(0,i))}function ivt(n){var t,i,r;return(n.allowWhitespace(),t=tw(n),!t)?null:(r={key:t},n.allowWhitespace(),!n.matchString(":"))?null:(n.allowWhitespace(),i=n.read(),!i)?null:(r.value=i.v,r)}function hk(n,t){var i,h,c,l,f,e,r,u,o,s;if(typeof n=="string"){if(h=rvt.exec(n))return s=n.lastIndexOf(")"),uvt.test(n)||t.error("Invalid input after method call expression '"+n.slice(s+1)+"'"),i={m:h[1]},l="["+n.slice(i.m.length+1,s)+"]",c=new fvt(l),i.a=gr(c.result[0]),i;if(n.indexOf(":")===-1)return n.trim();n=[n]}if(i={},r=[],u=[],n){while(n.length)if(f=n.shift(),typeof f=="string")if(e=f.indexOf(":"),e===-1)r.push(f);else{e&&r.push(f.substr(0,e));f.length>e+1&&(u[0]=f.substring(e+1));break}else r.push(f);u=u.concat(n)}return r.length?u.length||typeof r!="string"?(i={n:r.length===1&&typeof r[0]=="string"?r[0]:r},u.length===1&&typeof u[0]=="string"?(o=uf("["+u[0]+"]"),i.a=o?o.value:u[0].trim()):i.d=u):i=r:i="",i}function vvt(n){var v,t,y,p,w,i,b,k,s,h,d,r,e,c,g,nt,f,l,o,a;if((v=n.pos,n.inside||n.inAttribute)||!n.matchString("<")||n.nextChar()==="/")return null;if(t={},n.includeLinePositions&&(t.p=n.getLinePos(v)),n.matchString("!"))return t.t=up,n.matchPattern(/^doctype/i)||n.error("Expected DOCTYPE declaration"),t.a=n.matchPattern(/^(.+?)>/),t;if(t.t=dr,t.e=n.matchPattern(evt),!t.e)return null;for(ovt.test(n.nextChar())||n.error("Illegal tag name"),w=function(i,r){var u=r.n||r;cvt.test(u)&&(n.pos-=u.length,n.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)"));t.v[i]=r},n.allowWhitespace();i=yi(n)||gat(n);)i.name?(y=lvt[i.name])?t[y]=hk(i.value,n):(p=hvt.exec(i.name))?(t.v||(t.v={}),b=hk(i.value,n),w(p[1],b)):n.sanitizeEventAttributes&&svt.test(i.name)||(t.a||(t.a={}),t.a[i.name]=i.value||(i.value===""?"":0)):(t.m||(t.m=[]),t.m.push(i)),n.allowWhitespace();if(n.allowWhitespace(),n.matchString("/")&&(k=!0),!n.matchString(">"))return null;if(f=t.e.toLowerCase(),l=n.preserveWhitespace,!k&&!rf.test(t.e)){n.elementStack.push(f);(f==="script"||f==="style")&&(n.inside=f);s=[];h=u(null);do c=n.pos,g=n.remaining(),yvt(f,g)?(nt=bat(n))?(e=!0,o=nt.e.toLowerCase(),o!==f&&(n.pos=c,~n.elementStack.indexOf(o)||(a="Unexpected closing tag",rf.test(o)&&(a+=" (<"+o+"> is a void element - it cannot contain children)"),n.error(a)))):(r=hs(n,{open:n.standardDelimiters[0],close:n.standardDelimiters[1]}))?(e=!0,n.pos=c):(r=n.read(ks))?(h[r.n]&&(n.pos=c,n.error("Duplicate partial definition")),ht(r.f,n.stripComments,l,!l,!l),h[r.n]=r.f,d=!0):(r=n.read(gi))?s.push(r):e=!0:e=!0;while(!e);s.length&&(t.f=s);d&&(t.p=h);n.elementStack.pop()}return(n.inside=null,n.sanitizeElements&&n.sanitizeElements.indexOf(f)!==-1)?avt:t}function yvt(n,t){var i,r;return(i=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(t),r=ck[n],!i||!r)?!0:!~r.indexOf(i[1].toLowerCase())}function pvt(n){var t,r,i,u;return(r=n.remaining(),u=n.inside?"<\/"+n.inside:"<",n.inside&&!n.interpolate[n.inside]?t=r.indexOf(u):(i=n.tags.map(function(n){return n.open}),i=i.concat(n.tags.map(function(n){return"\\"+n.open})),n.inAttribute===!0?i.push('"',"'","=","<",">","`"):n.inAttribute?i.push(n.inAttribute):i.push(u),t=ps(r,i)),!t)?null:(t===-1&&(t=r.length),n.pos+=t,n.inside?r.substr(0,t):vs(r.substr(0,t)))}function ak(n){return n.replace(lk,"\\$&")}function dvt(n){var o=n.pos,i=n.standardDelimiters[0],r=n.standardDelimiters[1],u=undefined,f=undefined,t,e;if(!n.matchPattern(wvt)||!n.matchString(i)||(t=n.matchPattern(bvt),b("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+t+"}} ... {{/partial}}\n\n...instead of this:\n  <!-- {{>"+t+"}} --> ... <!-- {{/"+t+"}} -->'"),!n.matchString(r)||!n.matchPattern(kvt)))return n.pos=o,null;u=[];e=new RegExp("^<!--\\s*"+ak(i)+"\\s*\\/\\s*"+t+"\\s*"+ak(r)+"\\s*-->");do n.matchPattern(e)?f=!0:(bs=n.read(gi),bs||n.error("expected closing comment ('<!-- "+i+"/"+t+""+r+" -->')"),u.push(bs));while(!f);return{t:rp,f:u,n:t}}function gvt(n){var f,r,u,i,e,t;if(f=n.pos,t=n.standardDelimiters,!n.matchString(t[0]))return null;if(!n.matchPattern(vk))return n.pos=f,null;r=n.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/);r||n.error("expected legal partial name");n.matchString(t[1])||n.error("Expected closing delimiter '"+t[1]+"'");u=[];do(i=hs(n,{open:n.standardDelimiters[0],close:n.standardDelimiters[1]}))?(!1&&n.error("Expected "+t[0]+"/partial"+t[1]),e=!0):(i=n.read(gi),i||n.error("Expected "+t[0]+"/partial"+t[1]),u.push(i));while(!e);return{t:rp,n:r,f:u}}function nyt(n){for(var e=[],i=u(null),o=!1,r=n.preserveWhitespace,f;n.pos<n.str.length;){var h=n.pos,s=undefined,t=undefined;(t=n.read(ks))?(i[t.n]&&(n.pos=h,n.error("Duplicated partial definition")),ht(t.f,n.stripComments,r,!r,!r),i[t.n]=t.f,o=!0):(s=n.read(gi))?e.push(s):n.error("Unexpected template content")}return f={v:or,t:e},o&&(f.p=i),f}function ff(n,t){return new pk(n,t||{}).result}function ryt(n){var t=u(ds);return t.parse=function(t,i){return bk(t,i||n)},t}function bk(n,t){if(!ff)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return ff(n,t||this.options)}function uyt(n,t){var i;if(!g){if(t&&t.noThrow)return;throw new Error("Cannot retrieve template #"+n+" as Ractive is not running in a browser.");}if(kk(n)&&(n=n.substring(1)),!(i=document.getElementById(n))){if(t&&t.noThrow)return;throw new Error("Could not find template element with id #"+n);}if(i.tagName.toUpperCase()!=="SCRIPT"){if(t&&t.noThrow)return;throw new Error("Template element with id #"+n+", must be a <script> element");}return i.textContent}function kk(n){return n&&n.charAt(0)==="#"}function fyt(n){return!(typeof n=="string")}function eyt(n){return n.defaults&&(n=n.defaults),wk.reduce(function(t,i){return t[i]=n[i],t},{})}function oyt(n){var t=n._config.template,i;if(t&&t.fn)return i=dk(n,t.fn),i!==t.result?(t.result=i,of(i,n)):void 0}function dk(n,t){var i=syt(y.getParseOptions(n));return t.call(n,i)}function syt(n){var t=u(y);return t.parse=function(t,i){return y.parse(t,i||n)},t}function of(n,t){if(typeof n=="string")n[0]==="#"&&(n=y.fromId(n)),n=ff(n,y.getParseOptions(t));else if(typeof n.v!="number")throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");else if(n.v!==or)throw new Error("Mismatched template version (expected "+or+", got "+n.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");return n}function gk(n,t,i){if(t)for(var r in t)(i||!n.hasOwnProperty(r))&&(n[r]=t[r])}function hyt(n,t,i){if(!/_super/.test(i))return i;var r=function(){var u=cyt(r._parent,t),f="_super"in this,e=this._super,n;return this._super=u,n=i.apply(this,arguments),f?this._super=e:delete this._super,n};return r._parent=n,r._method=i,r}function cyt(n,t){var i,r;return t in n?(i=n[t],r=typeof i=="function"?i:function(){return i}):r=a,r}function td(n,t,i){return"options."+n+" has been deprecated in favour of options."+t+"."+(i?" You cannot specify both options, please use options."+t+".":"")}function nu(n,t,i){if(t in n)if(i in n)throw new Error(td(t,i,!0));else o(td(t,i)),n[i]=n[t]}function lyt(n){nu(n,"beforeInit","onconstruct");nu(n,"init","onrender");nu(n,"complete","oncomplete");nu(n,"eventDefinitions","events");f(n.adaptors)&&nu(n,"adaptors","adapt")}function ud(n,t,i,r){var u,f;lyt(r);for(u in r)rd[u]&&(f=r[u],typeof f=="function"&&(f=gs(t.prototype,u,f)),i[u]=f);nr.forEach(function(u){u[n](t,i,r)});wo[n](t,i,r);ef[n](t,i,r);bo[n](t,i,r);ayt(t.prototype,i,r)}function ayt(n,t,i){var r,u;for(r in i)!id[r]&&i.hasOwnProperty(r)&&(u=i[r],typeof u=="function"&&(u=gs(n,r,u)),t[r]=u)}function fd(n){var t={};return n.forEach(function(n){return t[n]=!0}),t}function vyt(){this.dirtyValue=this.dirtyArgs=!0;this.bound&&typeof this.owner.bubble=="function"&&this.owner.bubble()}function yyt(){var n;return this.items.length===1?this.items[0].detach():(n=document.createDocumentFragment(),this.items.forEach(function(t){var i=t.detach();i&&n.appendChild(i)}),n)}function pyt(n){var t,r,i,u;if(this.items){for(r=this.items.length,t=0;t<r;t+=1)if(i=this.items[t],i.find&&(u=i.find(n)))return u;return null}}function wyt(n,t){var i,u,r;if(this.items)for(u=this.items.length,i=0;i<u;i+=1)r=this.items[i],r.findAll&&r.findAll(n,t);return t}function byt(n,t){var i,u,r;if(this.items)for(u=this.items.length,i=0;i<u;i+=1)r=this.items[i],r.findAllComponents&&r.findAllComponents(n,t);return t}function kyt(n){var r,t,i,u;if(this.items){for(r=this.items.length,t=0;t<r;t+=1)if(i=this.items[t],i.findComponent&&(u=i.findComponent(n)))return u;return null}}function dyt(n){var t=n.index;return this.items[t+1]?this.items[t+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function gyt(){return this.items&&this.items[0]?this.items[0].firstNode():null}function th(n,t,i,r){return r=r||0,n.map(function(n){var u,f,e;return n.text?n.text:n.fragments?n.fragments.map(function(n){return th(n.items,t,i,r)}).join(""):(u=i+"-"+r++,e=n.keypath&&(f=n.root.viewmodel.wrapped[n.keypath.str])?f.value:n.getValue(),t[u]=e,"${"+u+"}")}).join("")}function npt(){var t,i,n,r;return this.dirtyArgs&&(i=th(this.items,t={},this.root._guid),n=uf("["+i+"]",t),r=n?n.value:[this.toString()],this.argsList=r,this.dirtyArgs=!1),this.argsList}function tpt(){var n=this;do if(n.pElement)return n.pElement.node;while(n=n.parent);return this.root.detached||this.root.el}function ipt(){var t,i,n,r;return this.dirtyValue&&(i=th(this.items,t={},this.root._guid),n=uf(i,t),r=n?n.value:this.toString(),this.value=r,this.dirtyValue=!1),this.value}function rpt(){this.registered&&this.root.viewmodel.unregister(this.keypath,this);this.resolver&&this.resolver.unbind()}function upt(){return this.value}function uh(n,t){for(var r,i=0;i<t.prop.length;i++)if((r=n[t.prop[i]])!==undefined)return r}function ir(n,t){var r={},u,f,i,o,e,s=!1;for(t||(r.refs=u={});n;){if((e=n.owner)&&(f=e.indexRefs)){if(t&&(i=e.getIndexRef(t)))return r.ref={fragment:n,ref:i},r;if(!t)for(o in f)i=f[o],u[i.n]||(s=!0,u[i.n]={fragment:n,ref:i})}!n.parent&&n.owner&&n.owner.component&&n.owner.component.parentFragment&&!n.owner.component.instance.isolated?(r.componentBoundary=!0,n=n.owner.component.parentFragment):n=n.parent}return s?r:undefined}function tu(n,t,i){var r;return t.charAt(0)==="@"?new rh(n,t,i):(r=ir(n.parentFragment,t))?new fh(n,r,i):new af(n,t,i)}function dd(n,t){var i,r;if(vf[n])return vf[n];for(r=[];t--;)r[t]="_"+t;return i=new Function(r.join(","),"return("+n+")"),vf[n]=i,i}function fpt(n){return n.call()}function ept(n,t){return n.replace(/_([0-9]+)/g,function(n,i){var r,u;return+i>=t.length?"_"+i:(r=t[i],r===undefined)?"undefined":r.isSpecial?(u=r.value,typeof u=="number"?u:'"'+u+'"'):r.str})}function opt(n){return t("${"+n.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function spt(n){return n!==undefined&&n[0]!=="@"}function hpt(n,t){var u,i,r;if(n.__ractive_nowrap)return n;if(i="__ractive_"+t._guid,u=n[i],u)return u;if(/this/.test(n.toString())){it(n,i,{value:gd.call(n,t),configurable:!0});for(r in n)n.hasOwnProperty(r)&&(n[i][r]=n[r]);return t._boundFunctions.push({fn:n,prop:i}),n[i]}return it(n,"__ractive_nowrap",{value:n}),n.__ractive_nowrap}function cpt(n){return n.value}function lpt(n){return n!=undefined}function apt(n){n.forceResolution()}function vpt(n,t){function e(t){n.resolve(t)}function f(t){var i=n.keypath;t!=i&&(n.resolve(t),i!==undefined&&n.fragments&&n.fragments.forEach(function(n){n.rebind(i,t)}))}var r,i,u;i=t.parentFragment;u=t.template;n.root=i.root;n.parentFragment=i;n.pElement=i.pElement;n.template=t.template;n.index=t.index||0;n.isStatic=t.template.s;n.type=t.template.t;n.registered=!1;(r=u.r)&&(n.resolver=tu(n,r,e));t.template.x&&(n.resolver=new iu(n,i,t.template.x,f));t.template.rx&&(n.resolver=new yf(n,t.template.rx,f));n.template.n!==bt||n.hasOwnProperty("value")||n.setValue(undefined)}function ypt(n){var t,i,r;if(n&&n.isSpecial){this.keypath=n;this.setValue(n.value);return}this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,t=!0);this.keypath=n;n!=undefined&&(i=this.root.viewmodel.get(n),this.root.viewmodel.register(n,this),this.registered=!0);this.setValue(i);t&&(r=this.twowayBinding)&&r.rebound()}function ppt(n,t){this.fragments&&this.fragments.forEach(function(i){return i.rebind(n,t)});this.resolver&&this.resolver.rebind(n,t)}function wpt(){this.parentFragment.bubble()}function bpt(){var n;return this.fragments.length===1?this.fragments[0].detach():(n=document.createDocumentFragment(),this.fragments.forEach(function(t){n.appendChild(t.detach())}),n)}function kpt(n){for(var r,i=this.fragments.length,t=0;t<i;t+=1)if(r=this.fragments[t].find(n))return r;return null}function dpt(n,t){for(var r=this.fragments.length,i=0;i<r;i+=1)this.fragments[i].findAll(n,t)}function gpt(n,t){for(var r=this.fragments.length,i=0;i<r;i+=1)this.fragments[i].findAllComponents(n,t)}function nwt(n){for(var r,i=this.fragments.length,t=0;t<i;t+=1)if(r=this.fragments[t].findComponent(n))return r;return null}function twt(n){return this.fragments[n.index+1]?this.fragments[n.index+1].firstNode():this.parentFragment.findNextNode(this)}function iwt(){var t,n,i;if(t=this.fragments.length)for(n=0;n<t;n+=1)if(i=this.fragments[n].firstNode())return i;return this.parentFragment.findNextNode(this)}function rwt(t){var i=this,s,u,r,f,e,h,o;if(!this.shuffling&&!this.unbound&&this.currentSubtype===ui){if(this.shuffling=!0,n.scheduleTask(function(){return i.shuffling=!1}),s=this.parentFragment,e=[],t.forEach(function(n,t){var r,h,f,o,s;if(n===t){e[n]=i.fragments[t];return}if(r=i.fragments[t],u===undefined&&(u=t),n===-1){i.fragmentsToUnrender.push(r);r.unbind();return}h=n-t;f=i.keypath.join(t);o=i.keypath.join(n);r.index=n;(s=r.registeredIndexRefs)&&s.forEach(uwt);r.rebind(f,o);e[n]=r}),f=this.root.viewmodel.get(this.keypath).length,u===undefined){if(this.length===f)return;u=this.length}for(this.length=this.fragments.length=f,this.rendered&&n.addView(this),h={template:this.template.f,root:this.root,owner:this},r=u;r<f;r+=1)o=e[r],o||this.fragmentsToCreate.push(r),this.fragments[r]=o}}function uwt(n){n.rebind("","")}function fwt(){var n=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(t){return n.docFrag.appendChild(t.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function ewt(t){var r=this,u,i;this.updating||(this.updating=!0,this.keypath&&(u=this.root.viewmodel.wrapped[this.keypath.str])&&(t=u.get()),this.fragmentsToCreate.length?(i={template:this.template.f||[],root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(n){var t;i.context=r.keypath.join(n);i.index=n;t=new e(i);r.fragmentsToRender.push(r.fragments[n]=t)}),this.fragmentsToCreate.length=0):owt(this,t)&&(this.bubble(),this.rendered&&n.addView(this)),this.value=t,this.updating=!1)}function ru(n,t,i){if(t===ui&&n.indexRefs&&n.indexRefs[0]){var r=n.indexRefs[0];(i&&r.t==="i"||!i&&r.t==="k")&&(i||(n.length=0,n.fragmentsToUnrender=n.fragments.slice(0),n.fragmentsToUnrender.forEach(function(n){return n.unbind()})));r.t=i?"k":"i"}n.currentSubtype=t}function owt(n,t){var i={template:n.template.f||[],root:n.root,pElement:n.parentFragment.pElement,owner:n};if(n.hasContext=!0,n.subtype)switch(n.subtype){case ai:return n.hasContext=!1,ch(n,t,!1,i);case bt:return n.hasContext=!1,ch(n,t,!0,i);case vi:return hh(n,i);case us:return hwt(n,t,i);case ui:if(rt(t))return ru(n,n.subtype,!0),yg(n,t,i)}return(n.ordered=!!le(t),n.ordered)?(ru(n,ui,!1),swt(n,t,i)):rt(t)||typeof t=="function"?n.template.i?(ru(n,ui,!0),yg(n,t,i)):(ru(n,vi,!1),hh(n,i)):(ru(n,ai,!1),n.hasContext=!1,ch(n,t,!1,i))}function swt(n,t,i){var u,r,f;if(r=t.length,r===n.length)return!1;if(r<n.length)n.fragmentsToUnrender=n.fragments.splice(r,n.length-r),n.fragmentsToUnrender.forEach(ft);else if(r>n.length)for(u=n.length;u<r;u+=1)i.context=n.keypath.join(u),i.index=u,f=new e(i),n.fragmentsToRender.push(n.fragments[u]=f);return n.length=r,!0}function yg(n,t,i){for(var f,r,s,h,o=n.hasKey||(n.hasKey={}),u=n.fragments.length;u--;)r=n.fragments[u],r.key in t||(s=!0,r.unbind(),n.fragmentsToUnrender.push(r),n.fragments.splice(u,1),o[r.key]=!1);for(u=n.fragments.length;u--;)r=n.fragments[u],r.index!==u&&(r.index=u,(h=r.registeredIndexRefs)&&h.forEach(lwt));u=n.fragments.length;for(f in t)o[f]||(s=!0,i.context=n.keypath.join(f),i.key=f,i.index=u++,r=new e(i),n.fragmentsToRender.push(r),n.fragments.push(r),o[f]=!0);return n.length=n.fragments.length,s}function hwt(n,t,i){return t?hh(n,i):pg(n)}function hh(n,t){var i;if(!n.length)return t.context=n.keypath,t.index=0,i=new e(t),n.fragmentsToRender.push(n.fragments[0]=i),n.length=1,!0}function ch(n,t,i,r){var o,f,u,s,h;if(f=le(t)&&t.length===0,u=!1,!le(t)&&rt(t)){u=!0;for(h in t){u=!1;break}}if(o=i?f||u||!t:t&&!f&&!u,o){if(!n.length)return r.index=0,s=new e(r),n.fragmentsToRender.push(n.fragments[0]=s),n.length=1,!0;if(n.length>1)return n.fragmentsToUnrender=n.fragments.splice(1),n.fragmentsToUnrender.forEach(ft),!0}else return pg(n)}function pg(n){if(n.length)return n.fragmentsToUnrender=n.fragments.splice(0,n.fragments.length).filter(cwt),n.fragmentsToUnrender.forEach(ft),n.length=n.fragmentsToRender.length=0,!0}function cwt(n){return n.rendered}function lwt(n){n.rebind("","")}function awt(n){var i,t,r;for(i="",t=0,r=this.length,t=0;t<r;t+=1)i+=this.fragments[t].toString(n);return i}function vwt(){var n=this;this.fragments.forEach(ft);this.fragmentsToRender.forEach(function(t){return v(n.fragments,t)});this.fragmentsToRender=[];fi.call(this);this.length=0;this.unbound=!0}function ywt(n){this.fragments.forEach(n?pwt:wwt);this.renderedFragments=[];this.rendered=!1}function pwt(n){n.unrender(!0)}function wwt(n){n.unrender(!1)}function bwt(){for(var n,r,u,f,t,e,i=this.renderedFragments;n=this.fragmentsToUnrender.pop();)n.unrender(!0),i.splice(i.indexOf(n),1);while(n=this.fragmentsToRender.shift())n.render();for(this.rendered&&(f=this.parentFragment.getNode()),e=this.fragments.length,t=0;t<e;t+=1){if(n=this.fragments[t],r=i.indexOf(n,t),r===t){this.docFrag.childNodes.length&&(u=n.firstNode(),f.insertBefore(this.docFrag,u));continue}this.docFrag.appendChild(n.detach());r!==-1&&i.splice(r,1);i.splice(t,0,n)}this.rendered&&this.docFrag.childNodes.length&&(u=this.parentFragment.findNextNode(this),f.insertBefore(this.docFrag,u));this.renderedFragments=this.fragments.slice()}function kwt(){var t,n;if(this.docFrag){for(t=this.nodes.length,n=0;n<t;n+=1)this.docFrag.appendChild(this.nodes[n]);return this.docFrag}}function dwt(n){for(var t,u,r=this.nodes.length,i=0;i<r;i+=1)if(t=this.nodes[i],t.nodeType===1){if(tt(t,n))return t;if(u=t.querySelector(n))return u}return null}function gwt(n,t){for(var i,f,o,u,e=this.nodes.length,r=0;r<e;r+=1)if((i=this.nodes[r],i.nodeType===1)&&(tt(i,n)&&t.push(i),f=i.querySelectorAll(n)))for(o=f.length,u=0;u<o;u+=1)t.push(f[u])}function nbt(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function yh(n){return ah[n]||(ah[n]=ot(n))}function en(n){var i,r,t;n&&n.name==="select"&&n.binding&&(i=io(n.node.options).filter(tbt),n.getAttribute("multiple")?t=i.map(function(n){return n.value}):(r=i[0])&&(t=r.value),t!==undefined&&n.binding.setValue(t),n.bubble())}function tbt(n){return n.selected}function ibt(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=vh(this.value,this.parentFragment.getNode(),this.docFrag),en(this.pElement),this.rendered=!0,this.docFrag}function rbt(t){var i;(i=this.root.viewmodel.wrapped[this.keypath.str])&&(t=i.get());t!==this.value&&(this.value=t,this.parentFragment.bubble(),this.rendered&&n.addView(this))}function ubt(){return this.value!=undefined?vs(""+this.value):""}function fbt(n){this.rendered&&n&&(this.nodes.forEach(se),this.rendered=!1)}function ebt(){var n,t;if(this.rendered){while(this.nodes&&this.nodes.length)n=this.nodes.pop(),n.parentNode.removeChild(n);t=this.parentFragment.getNode();this.nodes=vh(this.value,t,this.docFrag);t.insertBefore(this.docFrag,this.parentFragment.findNextNode(this));en(this.pElement)}}function obt(){var n=this.node,t;if(n)return(t=n.parentNode)&&t.removeChild(n),n}function vbt(){return null}function ybt(){return this.node}function pbt(n){if(this.attributes&&this.attributes[n])return this.attributes[n].value}function dbt(){var t=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();lt(t,this.value)||(this.name==="id"&&this.value&&delete this.root.nodes[this.value],this.value=t,this.name==="value"&&this.node&&(this.node._ractive.value=t),this.rendered&&n.addView(this))}function gbt(n){var t=n.fragment.items;if(t.length===1)return t[0].type===kr?t[0]:void 0}function nkt(n){if(this.type=kct,this.element=n.element,this.root=n.root,ntt(this,n.name),this.isBoolean=vb.test(this.name),!n.value||typeof n.value=="string"){this.value=this.isBoolean?!0:n.value||"";return}this.parentFragment=this.element.parentFragment;this.fragment=new e({template:n.value,root:this.root,owner:this});this.value=this.fragment.getValue();this.interpolator=gbt(this);this.isBindable=!!this.interpolator&&!this.interpolator.isStatic;this.ready=!0}function tkt(n,t){this.fragment&&this.fragment.rebind(n,t)}function ikt(n){var t;this.node=n;n.namespaceURI&&n.namespaceURI!==w.html||(t=utt[this.name]||this.name,n[t]!==undefined&&(this.propertyName=t),(this.isBoolean||this.isTwoway)&&(this.useProperty=!0),t==="value"&&(n._ractive.value=this.value));this.rendered=!0;this.update()}function rkt(){var t=this,n=t.name,f=t.namespacePrefix,i=t.value,u=t.interpolator,r=t.fragment;if((n!=="value"||this.element.name!=="select"&&this.element.name!=="textarea")&&(n!=="value"||this.element.getAttribute("contenteditable")===undefined)){if(n==="name"&&this.element.name==="input"&&u)return"name={{"+(u.keypath.str||u.ref)+"}}";if(this.isBoolean)return i?n:"";if(r){if(r.items.length===1&&r.items[0].value==null)return"";i=r.toString()}return f&&(n=f+":"+n),i?n+'="'+ukt(i)+'"':n}}function ukt(n){return n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function fkt(){this.fragment&&this.fragment.unbind();this.name==="id"&&delete this.root.nodes[this.value]}function ekt(){var r=this.value,t,n,u,i;if(!this.locked)for(this.node._ractive.value=r,t=this.node.options,i=t.length;i--;)if(n=t[i],u=n._ractive?n._ractive.value:n.value,u==r){n.selected=!0;break}}function okt(){var t=this.value,i,r,n,u;for(f(t)||(t=[t]),i=this.node.options,r=i.length;r--;)n=i[r],u=n._ractive?n._ractive.value:n.value,n.selected=ca(t,u)}function skt(){var n=this,t=n.node,i=n.value;t.checked=i==t._ractive.value}function hkt(){var f,i=this.node,t,r,u;if(f=i.checked,i.value=this.element.getAttribute("value"),i.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),f&&!i.checked&&this.element.binding&&(r=this.element.binding.siblings,u=r.length)){while(u--){if(t=r[u],!t.element.node)return;if(t.element.node.checked)return n.addRactive(t.root),t.handleChange()}this.root.viewmodel.set(t.keypath,undefined)}}function ckt(){var t=this,o=t.element,i=t.node,n=t.value,r=o.binding,u,e;if(u=o.getAttribute("value"),f(n)){for(e=n.length;e--;)if(u==n[e]){r.isChecked=i.checked=!0;return}r.isChecked=i.checked=!1}else r.isChecked=i.checked=n==u}function lkt(){this.node.className=he(this.value)}function akt(){var n=this,t=n.node,i=n.value;this.root.nodes[i]=t;t.id=i}function vkt(){var t,n;t=this.node;n=this.value;n===undefined&&(n="");t.style.setAttribute("cssText",n)}function ykt(){var n=this.value;n===undefined&&(n="");this.locked||(this.node.innerHTML=n)}function pkt(){var t=this,i=t.node,n=t.value;i._ractive.value=n;this.locked||(i.value=n==undefined?"":n)}function wkt(){this.locked||(this.node[this.propertyName]=this.value)}function bkt(){var n=this,t=n.node,u=n.namespace,i=n.name,r=n.value,f=n.fragment;u?t.setAttributeNS(u,i,(f||r).toString()):this.isBoolean?r?t.setAttribute(i,""):t.removeAttribute(i):r==null?t.removeAttribute(i):t.setAttribute(i,(f||r).toString())}function kkt(){var u=this,i=u.name,t=u.element,r=u.node,f,n;i==="id"?n=vtt:i==="value"?t.name==="select"&&i==="value"?n=t.getAttribute("multiple")?stt:ott:t.name==="textarea"?n=wh:t.getAttribute("contenteditable")!=null?n=ptt:t.name==="input"&&(f=t.getAttribute("type"),n=f==="file"?a:f==="radio"&&t.binding&&t.binding.name==="name"?ctt:wh):this.isTwoway&&i==="name"?r.type==="radio"?n=htt:r.type==="checkbox"&&(n=ltt):i==="style"&&r.style.setAttribute?n=ytt:i!=="class"||r.namespaceURI&&r.namespaceURI!==w.html?this.useProperty&&(n=wtt):n=att;n||(n=btt);this.update=n;this.update()}function dkt(n,t){var i=t?"svg":"div";return kh.innerHTML="<"+i+" "+n+"><\/"+i+">",io(kh.childNodes[0].attributes)}function gkt(n,t){for(var i=n.length;i--;)if(n[i].name===t.name)return!1;return!0}function ndt(n){while(n=n.parent)if(n.name==="form")return n}function tdt(){this._ractive.binding.handleChange()}function nc(n,t,i){var r=n+t+i;return gh[r]||(gh[r]=[])}function fdt(n){return n.isChecked}function edt(n){return n.element.getAttribute("value")}function tit(){var n;i.call(this);n=this._ractive.root.viewmodel.get(this._ractive.binding.keypath);this.value=n==undefined?"":n}function cdt(){var n=this._ractive.binding,t=this;!n._timeout||clearTimeout(n._timeout);n._timeout=setTimeout(function(){n.rendered&&i.call(t);n._timeout=undefined},n.element.lazy)}function ldt(n){var t=n.attributes,r,i,u,f,e;return n.binding&&(n.binding.teardown(),n.binding=null),(n.getAttribute("contenteditable")||!!t.contenteditable&&dt(t.contenteditable))&&dt(t.value)?i=nit:n.name==="input"?(r=n.getAttribute("type"),r==="radio"||r==="checkbox"?(u=dt(t.name),f=dt(t.checked),u&&f&&o("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:n.root}),u?i=r==="radio"?rdt:udt:f&&(i=r==="radio"?idt:odt)):r==="file"&&dt(t.value)?i=hdt:dt(t.value)&&(i=r==="number"||r==="range"?iit:wf)):n.name==="select"&&dt(t.value)?i=n.getAttribute("multiple")?sdt:tc:n.name==="textarea"&&dt(t.value)&&(i=wf),i&&(e=new i(n))&&e.keypath?e:void 0}function dt(n){return n&&n.isBindable}function adt(){var n=this.getAction();n&&!this.hasListener?this.listen():!n&&this.hasListener&&this.unrender()}function vdt(n){wr(this.root,this.getAction(),{event:n})}function ydt(){return this.action.toString().trim()}function pdt(n,t,i){var u=this,r,f,o;this.element=n;this.root=n.root;this.parentFragment=n.parentFragment;this.name=t;t.indexOf("*")!==-1&&(st('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',n.name,t),this.invalid=!0);i.m?(f=i.a.r,this.method=i.m,this.keypaths=[],this.fn=dd(i.a.s,f.length),this.parentFragment=n.parentFragment,o=this.root,this.refResolvers=[],f.forEach(function(n,t){var i=undefined;(i=oit.exec(n))?u.keypaths[t]={eventObject:!0,refinements:i[1]?i[1].split("."):[]}:u.refResolvers.push(tu(u,n,function(n){return u.resolve(t,n)}))}),this.fire=wdt):(r=i.n||i,typeof r!="string"&&(r=new e({template:r,root:this.root,owner:this})),this.action=r,i.d?(this.dynamicParams=new e({template:i.d,root:this.root,owner:this.element}),this.fire=kdt):i.a&&(this.params=i.a,this.fire=bdt))}function wdt(n){var t,i,r;if(t=this.root,typeof t[this.method]!="function")throw new Error('Attempted to call a non-existent method ("'+this.method+'")');i=this.keypaths.map(function(i){var r,f,u;if(i===undefined)return undefined;if(i.eventObject){if(r=n,f=i.refinements.length)for(u=0;u<f;u+=1)r=r[i.refinements[u]]}else r=t.viewmodel.get(i);return r});pr.enqueue(t,n);r=this.fn.apply(null,i);t[this.method].apply(t,r);pr.dequeue(t)}function bdt(n){wr(this.root,this.getAction(),{event:n,args:this.params})}function kdt(n){var t=this.dynamicParams.getArgsList();typeof t=="string"&&(t=t.substr(1,t.length-2));wr(this.root,this.getAction(),{event:n,args:t})}function sit(n){var t,i,r,u={};t=this._ractive;i=t.events[n.type];(r=ir(i.element.parentFragment))&&(u=ir.resolve(r));i.fire({node:this,original:n,index:u,keypath:t.keypath.str,context:t.root.viewmodel.get(t.keypath)})}function ngt(){var t,n=this.name;if(!this.invalid){if(t=lr("events",this.root,n))this.custom=t(this.node,tgt(n));else{if(!("on"+n in this.node)&&!(window&&"on"+n in window)&&!dl){gdt[n]||b(hi(n,"event"),{node:this.node});return}this.node.addEventListener(n,sit,!1)}this.hasListener=!0}}function tgt(n){return ic[n]||(ic[n]=function(t){var i=t.node._ractive;t.index=i.index;t.keypath=i.keypath.str;t.context=i.root.viewmodel.get(i.keypath);i.events[n].fire(t)}),ic[n]}function igt(n,t){function i(i){i&&i.rebind(n,t)}var r;if(this.method){r=this.element.parentFragment;this.refResolvers.forEach(i);return}typeof this.action!="string"&&i(this.action);this.dynamicParams&&i(this.dynamicParams)}function rgt(){this.node=this.element.node;this.node._ractive.events[this.name]=this;(this.method||this.getAction())&&this.listen()}function ugt(n,t){this.keypaths[n]=t}function fgt(){if(this.method){this.refResolvers.forEach(ft);return}typeof this.action!="string"&&this.action.unbind();this.dynamicParams&&this.dynamicParams.unbind()}function egt(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,sit,!1);this.hasListener=!1}function ogt(){var t=this;this.dirty||(this.dirty=!0,n.scheduleTask(function(){sgt(t);t.dirty=!1}));this.parentFragment.bubble()}function sgt(n){var r,t,u,i,f;(r=n.node,r)&&(i=io(r.options),t=n.getAttribute("value"),u=n.getAttribute("multiple"),t!==undefined?(i.forEach(function(n){var i,r;i=n._ractive?n._ractive.value:n.value;r=u?hgt(t,i):t==i;r&&(f=!0);n.selected=r}),f||(i[0]&&(i[0].selected=!0),n.binding&&n.binding.forceUpdate())):n.binding&&n.binding.forceUpdate())}function hgt(n,t){for(var i=n.length;i--;)if(n[i]==t)return!0}function cgt(n,t){(n.select=agt(n.parent),n.select)&&(n.select.options.push(n),t.a||(t.a={}),t.a.value!==undefined||t.a.hasOwnProperty("disabled")||(t.a.value=t.f),"selected"in t.a&&n.select.getAttribute("value")!==undefined&&delete t.a.selected)}function lgt(n){n.select&&v(n.select.options,n)}function agt(n){if(n)do if(n.name==="select")return n;while(n=n.parent)}function vgt(n){var f,t,o,i,s,r,u;this.type=dr;f=this.parentFragment=n.parentFragment;t=this.template=n.template;this.parent=n.pElement||f.pElement;this.root=o=f.root;this.index=n.index;this.key=n.key;this.name=pf(t.e);this.name==="option"&&cgt(this,t);this.name==="select"&&(this.options=[],this.bubble=ogt);this.name==="form"&&(this.formBindings=[]);u=bbt(this,t);this.attributes=dtt(this,t.a);this.conditionalAttributes=gtt(this,t.m);t.f&&(this.fragment=new e({template:t.f,root:o,owner:this,pElement:this,cssIds:null}));r=o.twoway;u.twoway===!1?r=!1:u.twoway===!0&&(r=!0);this.twoway=r;this.lazy=u.lazy;r&&(i=ldt(this,t.a))&&(this.binding=i,s=this.root._twowayBindings[i.keypath.str]||(this.root._twowayBindings[i.keypath.str]=[]),s.push(i));t.v&&(this.eventHandlers=yit(this,t.v));t.o&&(this.decorator=new uc(this,t.o));this.intro=t.t0||t.t1;this.outro=t.t0||t.t2}function ygt(n,t){function i(i){i.rebind(n,t)}var r,f,u,e;if(this.attributes&&this.attributes.forEach(i),this.conditionalAttributes&&this.conditionalAttributes.forEach(i),this.eventHandlers&&this.eventHandlers.forEach(i),this.decorator&&i(this.decorator),this.fragment&&i(this.fragment),u=this.liveQueries)for(e=this.root,r=u.length;r--;)u[r]._makeDirty();this.node&&(f=this.node._ractive)&&fa(f,"keypath",n,t)}function pgt(n){var t;(n.attributes.width||n.attributes.height)&&n.node.addEventListener("load",t=function(){var i=n.getAttribute("width"),r=n.getAttribute("height");i!==undefined&&n.node.setAttribute("width",i);r!==undefined&&n.node.setAttribute("height",r);n.node.removeEventListener("load",t,!1)},!1)}function wgt(n){n.node.addEventListener("reset",bit,!1)}function bgt(n){n.node.removeEventListener("reset",bit,!1)}function bit(){var t=this._ractive.proxy;n.start();t.formBindings.forEach(kgt);n.end()}function kgt(n){n.root.viewmodel.set(n.keypath,n.resetValue)}function dgt(n,t,i){var f,r,u;(this.element=n,this.root=f=n.root,this.isIntro=i,r=t.n||t,typeof r=="string"||(u=new e({template:r,root:f,owner:n}),r=u.toString(),u.unbind(),r!==""))&&(this.name=r,t.a?this.params=t.a:t.d&&(u=new e({template:t.d,root:f,owner:n}),this.params=u.getArgsList(),u.unbind()),this._fn=lr("transitions",f,r),this._fn||b(hi(r,"transition"),{ractive:this.root}))}function nrt(n){return n}function frt(){fr.hidden=document[ou]}function yc(){fr.hidden=!0}function pc(){fr.hidden=!1}function int(){var t=this,n,i,r;if(n=this.node=this.element.node,i=n.getAttribute("style"),this.complete=function(u){r||(!u&&t.isIntro&&rnt(n,i),n._ractive.transition=null,t._manager.remove(t),r=!0)},!this._fn){this.complete();return}this._fn.apply(this.root,[this].concat(this.params))}function rnt(n,t){t?n.setAttribute("style",t):(n.getAttribute("style"),n.removeAttribute("style"))}function unt(){var i=this,f=this.root,e,r,t;return e=fnt(this),r=this.node=ot(this.name,e),this.parentFragment.cssIds&&this.node.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(n){return"{"+n+"}"}).join(" ")),it(this.node,"_ractive",{value:{proxy:this,keypath:uo(this.parentFragment),events:u(null),root:f}}),this.attributes.forEach(function(n){return n.render(r)}),this.conditionalAttributes.forEach(function(n){return n.render(r)}),this.fragment&&(this.name==="script"?(this.bubble=art,this.node.text=this.fragment.toString(!1),this.fragment.unrender=a):this.name==="style"?(this.bubble=lrt,this.bubble(),this.fragment.unrender=a):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=a:this.node.appendChild(this.fragment.render())),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),this.eventHandlers&&this.eventHandlers.forEach(function(n){return n.render()}),this.name==="option"&&ent(this),this.name==="img"?pgt(this):this.name==="form"?wgt(this):this.name==="input"||this.name==="textarea"?this.node.defaultValue=this.node.value:this.name==="option"&&(this.node.defaultSelected=this.node.selected),this.decorator&&this.decorator.fn&&n.scheduleTask(function(){i.decorator.torndown||i.decorator.init()},!0),f.transitionsEnabled&&this.intro&&(t=new gf(this,this.intro,!0),n.registerTransition(t),n.scheduleTask(function(){return t.start()},!0),this.transition=t),this.node.autofocus&&n.scheduleTask(function(){return i.node.focus()},!0),ont(this),this.node}function fnt(n){var i,t;return(i=n.getAttribute("xmlns"))?i:n.name==="svg"?w.svg:(t=n.parent)?t.name==="foreignObject"?w.html:t.node.namespaceURI:n.root.el.namespaceURI}function ent(n){var i,t,r;if(n.select&&(t=n.select.getAttribute("value"),t!==undefined))if(i=n.getAttribute("value"),n.select.node.multiple&&f(t)){for(r=t.length;r--;)if(i==t[r]){n.node.selected=!0;break}}else n.node.selected=i==t}function ont(n){var t,i,r,f,u;t=n.root;do for(i=t._liveQueries,r=i.length;r--;)f=i[r],u=i["_"+f],u._test(n)&&(n.liveQueries||(n.liveQueries=[])).push(u);while(t=t.parent)}function snt(n){var i,t,r;if(i=n.getAttribute("value"),i===undefined||!n.select)return!1;if(t=n.select.getAttribute("value"),t==i)return!0;if(n.select.getAttribute("multiple")&&f(t))for(r=t.length;r--;)if(t[r]==i)return!0}function hnt(n){var t,i,r,u;if(t=n.attributes,i=t.type,r=t.value,u=t.name,i&&i.value==="radio"&&r&&u.interpolator)return r.value===u.interpolator.value?!0:void 0}function yrt(n){var t=n.toString();return t?" "+t:""}function cnt(){this.fragment&&this.fragment.unbind();this.binding&&this.binding.unbind();this.eventHandlers&&this.eventHandlers.forEach(ft);this.name==="option"&&lgt(this);this.attributes.forEach(ft);this.conditionalAttributes.forEach(ft)}function lnt(t){var r,u,i;(i=this.transition)&&i.complete();this.name==="option"?this.detach():t&&n.detachWhenReady(this);this.fragment&&this.fragment.unrender(!1);(r=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,u=this.root._twowayBindings[r.keypath.str],u.splice(u.indexOf(r),1));this.eventHandlers&&this.eventHandlers.forEach(cst);this.decorator&&n.registerDecorator(this.decorator);this.root.transitionsEnabled&&this.outro&&(i=new gf(this,this.outro,!1),n.registerTransition(i),n.scheduleTask(function(){return i.start()}));this.liveQueries&&ant(this);this.name==="form"&&bgt(this)}function ant(n){for(var t,r,i=n.liveQueries.length;i--;)t=n.liveQueries[i],r=t.selector,t._remove(n.node)}function pnt(n,t){var i=vnt.exec(t)[0];return n===null||i.length<n.length?i:n}function kc(n,t,i){var r,u;return(r=wnt(n,t,i||{}))?r:(r=y.fromId(t,{noThrow:!0}),r?(r=ynt(r),u=y.parse(r,y.getParseOptions(n)),n.partials[t]=u.t):void 0)}function wnt(n,t,i){var f=undefined,r=drt(t,i.owner),u,e,s;if(r)return r;if(u=pe("partials",n,t),u){if(r=u.partials[t],typeof r=="function"&&(f=r.bind(u),f.isOwner=u.partials.hasOwnProperty(t),r=f.call(n,y)),!r&&r!==""){o(ra,t,"partial","partial",{ractive:n});return}return y.isParsed(r)||(e=y.parse(r,y.getParseOptions(u)),e.p&&o("Partials ({{>%s}}) cannot contain nested inline partials",t,{ractive:n}),s=f?u:bnt(u,t),s.partials[t]=r=e.t),f&&(r._fn=f),r.v?r.t:r}}function bnt(n,t){return n.partials.hasOwnProperty(t)?n:krt(n.constructor,t)}function krt(n,t){if(n)return n.partials.hasOwnProperty(t)?n:krt(n._Parent,t)}function drt(n,t){if(t){if(t.template&&t.template.p&&t.template.p[n])return t.template.p[n];if(t.parentFragment&&t.parentFragment.owner)return drt(n,t.parentFragment.owner)}}function tut(n,t){var i,r=pe("components",n,t),u;if(r&&(i=r.components[t],!i._Parent)){if(u=i.bind(r),u.isOwner=r.components.hasOwnProperty(t),i=u(),!i){o(ra,t,"component","component",{ractive:n});return}typeof i=="string"&&(i=tut(n,i));i._fn=u;r.components[t]=i}return i}function dnt(){var n=this.instance.fragment.detach();return rut.fire(this.instance),n}function gnt(n){return this.instance.fragment.find(n)}function nti(n,t){return this.instance.fragment.findAll(n,t)}function tti(n,t){t._test(this,!0);this.instance.fragment&&this.instance.fragment.findAllComponents(n,t)}function iti(n){return!n||n===this.name?this.instance:this.instance.fragment?this.instance.fragment.findComponent(n):null}function rti(){return this.parentFragment.findNextNode(this)}function uti(){return this.rendered?this.instance.fragment.firstNode():null}function eti(t,i,r){function c(t){var u,r;(t.value=i,t.updating)||(r=t.ractive,u=t.keypath,t.updating=!0,n.start(r),r.viewmodel.mark(u),n.end(),t.updating=!1)}var s,u,f,o,h,e;if(s=t.obj,u=t.prop,r&&!r.configurable){if(u==="length")return;throw new Error('Cannot use magic mode with property "'+u+'" - object is not configurable');}r&&(f=r.get,o=r.set);h=f||function(){return i};e=function(n){o&&o(n);i=f?f():n;e._ractiveWrappers.forEach(c)};e._ractiveWrappers=[t];Object.defineProperty(s,u,{get:h,set:e,enumerable:!0,configurable:!0})}function oti(n,t){var u,i,r,f;if(this.adaptors)for(u=this.adaptors.length,i=0;i<u;i+=1)if(r=this.adaptors[i],r.filter(t,n,this.ractive)){f=this.wrapped[n]=r.wrap(this.ractive,t,n,hti(n));f.value=t;return}}function sti(n,t){var r={},i;if(!t)return n;t+=".";for(i in n)n.hasOwnProperty(i)&&(r[t+i]=n[i]);return r}function hti(n){var t;return ie[n]||(t=n?n+".":"",ie[n]=function(i,r){var u;return typeof i=="string"?(u={},u[t+i]=r,u):typeof i=="object"?t?sti(i,n):i:void 0}),ie[n]}function cti(n){for(var r=[vt],t,i=n.length;i--;)for(t=n[i].parent;t&&!t.isRoot;)n.indexOf(t)===-1&&ha(r,t),t=t.parent;return r}function yut(n,t,i){var r;(wut(n,t),i)||(r=t.wildcardMatches(),r.forEach(function(i){put(n,i,t)}))}function put(n,t,i){var r,u,f;(t=t.str||t,r=n.depsMap.patternObservers,u=r&&r[t],u)&&u.forEach(function(t){f=i.join(t.lastKey);wut(n,f);put(n,t,f)})}function wut(n,t){n.patternObservers.forEach(function(n){n.regex.test(t.str)&&n.update(t)})}function lti(){function o(i){var r=i.key;i.viewmodel===t?(t.clearCache(r.str),i.invalidate(),n.push(r),f(r)):i.viewmodel.mark(r)}function f(n){var i,r;t.noCascade.hasOwnProperty(n.str)||((r=t.deps.computed[n.str])&&r.forEach(o),(i=t.depsMap.computed[n.str])&&i.forEach(f))}var i=this,t=this,n,r,e={},u;if(n=this.changes,n.length)return n.slice().forEach(f),r=cti(n),r.forEach(function(i){var r;n.indexOf(i)===-1&&(r=t.deps.computed[i.str])&&r.forEach(o)}),this.changes=[],this.patternObservers.length&&(r.forEach(function(n){return yut(i,n,!0)}),n.forEach(function(n){return yut(i,n)})),this.deps.observers&&(r.forEach(function(n){return kut(i,null,n,"observers")}),dut(this,n,"observers")),this.deps["default"]&&(u=[],r.forEach(function(n){return kut(i,u,n,"default")}),u.length&&ati(this,u,n),dut(this,n,"default")),n.forEach(function(n){e[n.str]=i.get(n)}),this.implicitChanges={},this.noCascade={},e}function kut(n,t,i,r){var u,f;(u=gut(n,i,r))&&(f=n.get(i),u.forEach(function(n){t&&n.refineValue?t.push(n):n.setValue(f)}))}function ati(n,t,i){t.forEach(function(t){for(var e=!1,u=0,o=i.length,f=[],r;u<o;){if(r=i[u],r===t.keypath){e=!0;break}r.slice(0,t.keypath.length)===t.keypath&&f.push(r);u++}e&&t.setValue(n.get(t.keypath));f.length&&t.refineValue(f)})}function dut(n,t,i){function u(n){n.forEach(f);n.forEach(e)}function f(t){var u=gut(n,t,i);u&&r.push({keypath:t,deps:u})}function e(t){var r;(r=n.depsMap[i][t.str])&&u(r)}function o(t){var i=n.get(t.keypath);t.deps.forEach(function(n){return n.setValue(i)})}var r=[];u(t);r.forEach(o)}function gut(n,t,i){var r=n.deps[i];return r?r[t.str]:null}function vti(){this.captureGroups.push([])}function yti(n,t){var i,r;if(t||(r=this.wrapped[n])&&r.teardown()!==!1&&(this.wrapped[n]=null),this.cache[n]=undefined,i=this.cacheMap[n])while(i.length)this.clearCache(i.pop())}function pti(n,t){var i=t.firstKey;return!(i in n.data)&&!(i in n.computations)&&!(i in n.mappings)}function wti(n,t){var i=new re(n,t);return this.ready&&i.init(this),this.computations[n.str]=i}function dti(n,t){var f=this.cache,i,e,u,o,r=n.str,s;if(t=t||kti,t.capture&&(o=yt(this.captureGroups))&&(~o.indexOf(n)||o.push(n)),gt.call(this.mappings,n.firstKey))return this.mappings[n.firstKey].get(n,t);if(n.isSpecial)return n.value;if(f[r]===undefined?((e=this.computations[r])&&!e.bypass?(i=e.get(),this.adapt(r,i)):(u=this.wrapped[r])?i=u.value:n.isRoot?(this.adapt("",this.data),i=this.data):i=gti(this,n),f[r]=i):i=f[r],!t.noUnwrap&&(u=this.wrapped[r])&&(i=u.get()),n.isRoot&&t.fullRootGet)for(s in this.mappings)i[s]=this.mappings[s].getValue();if(i!==rft)return i}function gti(n,t){var i,u,r,f;if(i=n.get(t.parent),(f=n.wrapped[t.parent.str])&&(i=f.get()),i!==null&&i!==undefined)return((u=n.cacheMap[t.parent.str])?u.indexOf(t.str)===-1&&u.push(t.str):n.cacheMap[t.parent.str]=[t.str],typeof i=="object"&&!(t.lastKey in i))?n.cache[t.str]=rft:(r=i[t.lastKey],n.adapt(t.str,r,!1),n.cache[t.str]=r,r)}function nii(){for(var n in this.computations)this.computations[n].init(this)}function tii(n,t){var i=this.mappings[n.str]=new ol(n,t);return i.initViewmodel(this),i}function iii(n,t){var r,i=n.str,u;t&&(t.implicit&&(this.implicitChanges[i]=!0),t.noCascade&&(this.noCascade[i]=!0));(r=this.computations[i])&&r.invalidate();this.changes.indexOf(n)===-1&&this.changes.push(n);u=t?t.keepExistingWrapper:!1;this.clearCache(i,u);this.ready&&this.onchange()}function fii(n,t,i,r){var u,f,e,s;if(this.mark(n),r&&r.compare){e=oii(r.compare);try{u=t.map(e);f=i.map(e)}catch(h){o('merge(): "%s" comparison failed. Falling back to identity checking',n);u=t;f=i}}else u=t,f=i;s=rii(u,f);this.smartUpdate(n,i,s,t.length!==i.length)}function eii(n){return JSON.stringify(n)}function oii(n){if(n===!0)return eii;if(typeof n=="string")return sl[n]||(sl[n]=function(t){return t[n]}),sl[n];if(typeof n=="function")return n;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)");}function sii(n,t){var i=arguments[2]===undefined?"default":arguments[2],u,r,f;t.isStatic||((u=this.mappings[n.firstKey])?u.register(n,t,i):(r=this.deps[i]||(this.deps[i]={}),f=r[n.str]||(r[n.str]=[]),f.push(t),n.isRoot||hii(this,n,i)))}function hii(n,t,i){for(var f,r,u;!t.isRoot;)f=n.depsMap[i]||(n.depsMap[i]={}),r=f[t.parent.str]||(f[t.parent.str]=[]),u=t.str,r["_"+u]===undefined&&(r["_"+u]=0,r.push(t)),r["_"+u]+=1,t=t.parent}function cii(){return this.captureGroups.pop()}function lii(n){this.data=n;this.clearCache("")}function aii(n,t){var f=arguments[2]===undefined?{}:arguments[2],e,i,r,u;if(!f.noMapping&&(e=this.mappings[n.firstKey]))return e.set(n,t);if(i=this.computations[n.str],i){if(i.setting)return;i.set(t);t=i.get()}lt(this.cache[n.str],t)||(r=this.wrapped[n.str],r&&r.reset&&(u=r.reset(t)!==!1,u&&(t=r.get())),i||u||vii(this,n,t),f.silent?this.clearCache(n.str):this.mark(n))}function vii(n,t,i){var r,u,f,e;f=function(){r.set?r.set(t.lastKey,i):(u=r.get(),e())};e=function(){u||(u=rl(t.lastKey),n.set(t.parent,u,{silent:!0}));u[t.lastKey]=i};r=n.wrapped[t.parent.str];r?f():(u=n.get(t.parent),(r=n.wrapped[t.parent.str])?f():e())}function wii(n,t,i){var e=this,f,u,r;if(u=i.length,i.forEach(function(t,i){t===-1&&e.mark(n.join(i),lft)}),this.set(n,t,{silent:!0}),(f=this.deps["default"][n.str])&&f.filter(bii).forEach(function(n){return n.shuffle(i,t)}),u!==t.length){for(this.mark(n.join("length"),pii),r=i.touchedFrom;r<t.length;r+=1)this.mark(n.join(r));for(r=t.length;r<u;r+=1)this.mark(n.join(r),lft)}}function bii(n){return typeof n.shuffle=="function"}function kii(){var t=this,n;for(Object.keys(this.cache).forEach(function(n){return t.clearCache(n)});n=this.unresolvedImplicitDependencies.pop();)n.teardown()}function dii(n,t){var i=arguments[2]===undefined?"default":arguments[2],f,r,u;if(!t.isStatic){if(f=this.mappings[n.firstKey])return f.unregister(n,t,i);if(r=this.deps[i][n.str],u=r.indexOf(t),u===-1)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");(r.splice(u,1),n.isRoot)||gii(this,n,i)}}function gii(n,t,i){for(var u,r;!t.isRoot;)u=n.depsMap[i],r=u[t.parent.str],r["_"+t.str]-=1,r["_"+t.str]||(v(r,t),r["_"+t.str]=undefined),t=t.parent}function cl(n){this.hook=new h(n);this.inProcess={};this.queue={}}function yft(n,t){return n[t._guid]||(n[t._guid]=[])}function pft(n,t){var i=yft(n.queue,t);for(n.hook.fire(t);i.length;)pft(n,i.shift());delete n.queue[t._guid]}function nri(n,t){var r={};for(var i in t)r[i]=tri(n,i,t[i]);return r}function tri(n,t,i){var r,u;return typeof i=="function"&&(r=ll(i,n)),typeof i=="string"&&(r=bft(n,i)),typeof i=="object"&&(typeof i.get=="string"?r=bft(n,i.get):typeof i.get=="function"?r=ll(i.get,n):st("`%s` computation must have a `get()` method",t),typeof i.set=="function"&&(u=ll(i.set,n))),{getter:r,setter:u}}function bft(n,t){var i,r,u;return i="return ("+t.replace(wft,function(n,t){return r=!0,'__ractive.get("'+t+'")'})+");",r&&(i="var __ractive = this; "+i),u=new Function(i),r?u.bind(n):u}function ll(n,t){return/this/.test(n.toString())?n.bind(t):n}function eri(t){var i=arguments[1]===undefined?{}:arguments[1],r=arguments[2]===undefined?{}:arguments[2],c,h,f,l;s.DEBUG&&cr();hri(t,r);it(t,"data",{get:cri});iri.fire(t,i);fri.forEach(function(n){t[n]=si(u(t.constructor[n]||null),i[n])});h=new hl({adapt:ori(t,t.adapt,i),data:wu.init(t.constructor,t,i),computed:nri(t,si(u(t.constructor.prototype.computed),i.computed)),mappings:r.mappings,ractive:t,onchange:function(){return n.addRactive(t)}});t.viewmodel=h;h.init();hf.init(t.constructor,t,i);rri.fire(t);kft.begin(t);t.template&&(f=undefined,(r.cssIds||t.cssId)&&(f=r.cssIds?r.cssIds.slice():[],t.cssId&&f.push(t.cssId)),t.fragment=new e({template:t.template,root:t,owner:t,cssIds:f}));kft.end(t);(c=hr(t.el))&&(l=t.render(c,t.append),s.DEBUG_PROMISES&&l["catch"](function(n){b("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;");o("An error happened during rendering",{ractive:t});n.stack&&ta(n.stack);throw n;}))}function ori(n,t,i){function e(t){return typeof t=="string"&&(t=lr("adaptors",n,t),t||st(hi(t,"adaptor"))),t}var r,f,u;if(t=t.map(e),r=la(i.adapt).map(e),r=sri(t,r),f="magic"in i?i.magic:n.magic,u="modifyArrays"in i?i.modifyArrays:n.modifyArrays,f){if(!hu)throw new Error("Getters and setters (magic mode) are not supported in this browser");u&&r.push(aut);r.push(er)}return u&&r.push(te),r}function sri(n,t){for(var i=n.slice(),r=t.length;r--;)~i.indexOf(t[r])||i.push(t[r]);return i}function hri(n,t){n._guid="r-"+uri++;n._subs=u(null);n._config={};n._twowayBindings=u(null);n._animations=[];n.nodes={};n._liveQueries=[];n._liveComponentQueries=[];n._boundFunctions=[];t.component?(n.parent=t.parent,n.container=t.container||null,n.root=n.parent.root,n.component=t.component,t.component.instance=n,n._inlinePartials=t.inlinePartials):(n.root=n,n.parent=n.container=null)}function cri(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead");}function dft(n,t,i){this.parentFragment=n.parentFragment;this.callback=i;this.fragment=new e({template:t,root:n.root,owner:this});this.update()}function lri(n,t,i){var r;return t.r?r=tu(n,t.r,i):t.x?r=new iu(n,n.parentFragment,t.x,i):t.rx&&(r=new yf(n,t.rx,i)),r}function ari(n){return n.length===1&&n[0].t===kr}function vri(n,t){for(var i in t)t.hasOwnProperty(i)&&yri(n.instance,n.root,i,t[i])}function yri(n,t,i,r){typeof r!="string"&&st("Components currently only support simple events - you cannot include arguments. Sorry!");n.on(i,function(){var n,i;return arguments.length&&arguments[0]&&arguments[0].node&&(n=Array.prototype.shift.call(arguments)),i=Array.prototype.slice.call(arguments),wr(t,r,{event:n,args:i}),!1})}function pri(n,t){var i,r;if(!t)throw new Error('Component "'+this.name+'" not found');i=this.parentFragment=n.parentFragment;r=i.root;this.root=r;this.type=ip;this.name=n.template.e;this.index=n.index;this.indexRefBindings={};this.yielders={};this.resolvers=[];gft(this,t,n.template.a,n.template.f,n.template.p);vri(this,n.template.v);(n.template.t1||n.template.t2||n.template.o)&&o('The "intro", "outro" and "decorator" directives have no effect on components',{ractive:this.instance});net(this)}function wri(n,t){function u(i){i.rebind(n,t)}var r,i;this.resolvers.forEach(u);for(i in this.yielders)this.yielders[i][0]&&u(this.yielders[i][0]);(r=this.root._liveComponentQueries["_"+this.name])&&r._makeDirty()}function bri(){var n=this.instance;return n.render(this.parentFragment.getNode()),this.rendered=!0,n.fragment.detach()}function kri(){return this.instance.fragment.toString()}function dri(){var n=this.instance;this.resolvers.forEach(ft);gri(this);n.fragment.unbind();n.viewmodel.teardown();n.fragment.rendered&&n.el.__ractive_instances__&&v(n.el.__ractive_instances__,n);eet.fire(n)}function gri(n){var t,i;t=n.root;do(i=t._liveComponentQueries["_"+n.name])&&i._remove(n);while(t=t.parent)}function nui(n){this.shouldDestroy=n;this.instance.unrender()}function tui(n){var t=this;this.owner=n.owner;this.parent=this.owner.parentFragment;this.root=n.root;this.pElement=n.pElement;this.context=n.context;this.index=n.index;this.key=n.key;this.registeredIndexRefs=[];this.cssIds="cssIds"in n?n.cssIds:this.parent?this.parent.cssIds:null;this.items=n.template.map(function(i,r){return iui({parentFragment:t,pElement:n.pElement,template:i,index:r})});this.value=this.argsList=null;this.dirtyArgs=this.dirtyValue=!0;this.bound=!0}function iui(n){if(typeof n.template=="string")return new ih(n);switch(n.template.t){case du:return new pl(n);case kr:return new sh(n);case et:return new lh(n);case bu:return new ph(n);case dr:var t=undefined;return(t=tut(n.parentFragment.root,n.template.e))?new set(n,t):new bc(n);case ku:return new nut(n);case li:return new yl(n);case up:return new wl(n);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!");}}function rui(n,t){(!this.owner||this.owner.hasContext)&&fa(this,"context",n,t);this.items.forEach(function(i){i.rebind&&i.rebind(n,t)})}function uui(){var n;return this.items.length===1?n=this.items[0].render():(n=document.createDocumentFragment(),this.items.forEach(function(t){n.appendChild(t.render())})),this.rendered=!0,n}function fui(n){return this.items?this.items.map(n?oui:eui).join(""):""}function eui(n){return n.toString()}function oui(n){return n.toString(!0)}function sui(){this.bound&&(this.items.forEach(hui),this.bound=!1)}function hui(n){n.unbind&&n.unbind()}function cui(n){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(t){return t.unrender(n)});this.rendered=!1}function yui(t){var r,u,f,o,s,i;if(t=t||{},typeof t!="object")throw new Error("The reset method takes either no arguments, or an object containing new data");for((u=this.viewmodel.wrapped[""])&&u.reset?u.reset(t)===!1&&this.viewmodel.reset(t):this.viewmodel.reset(t),f=hf.reset(this),o=f.length;o--;)if(aui.indexOf(f[o])>-1){s=!0;break}return s?(i=undefined,this.viewmodel.mark(vt),(i=this.component)&&(i.shouldDestroy=!0),this.unrender(),i&&(i.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new e({template:this.template,root:this,owner:this})),r=this.render(this.el,this.anchor)):(r=n.start(this,!0),this.viewmodel.mark(vt),n.end()),vui.fire(this,t),r}function pui(n){var i,t;ef.init(null,this,{template:n});i=this.transitionsEnabled;this.transitionsEnabled=!1;(t=this.component)&&(t.shouldDestroy=!0);this.unrender();t&&(t.shouldDestroy=!1);this.fragment.unbind();this.fragment=new e({template:this.template,root:this,owner:this});this.render(this.el,this.anchor);this.transitionsEnabled=i}function wui(t,i){var r,u;if(u=n.start(this,!0),rt(t)){r=t;for(t in r)r.hasOwnProperty(t)&&(i=r[t],get(this,t,i))}else get(this,t,i);return n.end(),u}function get(n,i,r){i=t(ut(i));i.isPattern?au(n,i).forEach(function(t){n.viewmodel.set(t,r)}):n.viewmodel.set(i,r)}function nfi(n,t){return ea(this,n,t===undefined?-1:-t)}function tfi(){var n;return this.fragment.unbind(),this.viewmodel.teardown(),this.fragment.rendered&&this.el.__ractive_instances__&&v(this.el.__ractive_instances__,this),this.shouldDestroy=!0,n=this.fragment.rendered?this.unrender():pt.resolve(),tot.fire(this),this._boundFunctions.forEach(ifi),n}function ifi(n){delete n.fn[n.prop]}function rfi(n){var r=this,i;if(typeof n!="string")throw new TypeError(got);return(i=undefined,/\*/.test(n))?(i={},au(this,t(ut(n))).forEach(function(n){i[n.str]=!r.viewmodel.get(n)}),this.set(i)):this.set(n,!this.get(n))}function ufi(){return this.fragment.toString(!0)}function ffi(){var t,i;if(!this.fragment.rendered)return o("ractive.unrender() was called on a Ractive instance that was not rendered"),pt.resolve();for(t=n.start(this,!0),i=!this.component||this.component.shouldDestroy||this.shouldDestroy;this._animations[0];)this._animations[0].stop();return this.fragment.unrender(i),v(this.el.__ractive_instances__,this),uot.fire(this),n.end(),t}function hfi(i){var r;return i=t(i)||vt,r=n.start(this,!0),this.viewmodel.mark(i),n.end(),sfi.fire(this,i),r}function cfi(n,i){var f,u,r;if(typeof n!="string"||i){r=[];for(u in this._twowayBindings)(!n||t(u).equalsOrStartsWith(n))&&r.push.apply(r,this._twowayBindings[u])}else r=this._twowayBindings[n];return f=lfi(this,r),this.set(f)}function lfi(n,t){var r={},i=[];return t.forEach(function(n){var u,t;if(!n.radioName||n.element.node.checked){if(n.checkboxName){i[n.keypath.str]||n.changed()||(i.push(n.keypath),i[n.keypath.str]=n);return}(u=n.attribute.value,t=n.getValue(),to(u,t))||lt(u,t)||(r[n.keypath.str]=t)}}),i.length&&i.forEach(function(n){var t,f,u;t=i[n.str];f=t.attribute.value;u=t.getValue();to(f,u)||(r[n.str]=u)}),r}function afi(n,t){return typeof t=="function"&&/_super/.test(n)}function vfi(n){for(var t={};n;)yfi(n,t),wfi(n,t),n=n._Parent!==s?n._Parent:!1;return t}function yfi(n,t){nr.forEach(function(i){pfi(i.useDefaults?n.prototype:n,t,i.name)})}function pfi(n,t,i){var r,u=Object.keys(n[i]);u.length&&((r=t[i])||(r=t[i]={}),u.filter(function(n){return!(n in r)}).forEach(function(t){return r[t]=n[i][t]}))}function wfi(n,t){Object.keys(n.prototype).forEach(function(i){var r,u,f;i!=="computed"&&(r=n.prototype[i],i in t?typeof t[i]=="function"&&typeof r=="function"&&t[i]._method&&(u=undefined,f=r._method,f&&(r=r._method),u=oot(t[i]._method,r),f&&(u._method=u),t[i]=u):t[i]=r._method?r._method:r)})}function cot(){for(var i=arguments.length,t=Array(i),n=0;n<i;n++)t[n]=arguments[n];return t.length?t.reduce(lot,this):lot(this)}function lot(n){var t=arguments[1]===undefined?{}:arguments[1],i,r;return t.prototype instanceof s&&(t=sot(t)),i=function(n){if(!(this instanceof i))return new i(n);al(this,n)},r=u(n.prototype),r.constructor=i,oi(i,{defaults:{value:r},extend:{value:cot,writable:!0,configurable:!0},_Parent:{value:n}}),hf.extend(n,r,t),wu.extend(n,r,t),t.computed&&(r.computed=si(u(n.prototype.computed),t.computed)),i.prototype=r,i}var or=3,yot={el:void 0,append:!1,template:{v:or,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},kl=yot,pot={linear:function(n){return n},easeIn:function(n){return Math.pow(n,3)},easeOut:function(n){return Math.pow(n-1,3)+1},easeInOut:function(n){return(n/=.5)<1?.5*Math.pow(n,3):.5*(Math.pow(n-2,3)+2)}},g,dl,gl,hu,w,ue,nt,ot,tt,ei,fe,sr,ee,cu,na,oe,u,it,oi,a,ae,ve,lu,cr,ar,vr,yr,vt,ke,oa,de,ge,no,sa,pt,uo,eo,r,n,ni,ka,nv,tv,iv,rv,uv,fv,ev,ho,cv,lv,av,vv,yv,pr,wv,bv,kv,dv,gv,ty,co,lo,ry,uy,fy,ey,hy,cy,wo,wy,bo,wu,wt,ko,gy,fs,vp,yp,bp,kp,dp,iw,uw,fw,ew,ss,ow,sw,hw,lw,aw,vw,yw,pw,ww,bw,kw,dw,nb,ib,rb,ub,fb,eb,lb,ab,vb,rf,as,yb,pb,wb,bb,kb,gb,rk,ws,uk,fk,ek,ok,sk,lk,vk,gi,ks,wk,ds,y,ef,nd,sf,nr,gs,hf,nh,cf,tr,id,rd,ed,od,sd,hd,cd,ld,ad,vd,yd,pd,wd,lf,ih,fi,bd,af,rh,kd,fh,vf,iu,gd,eh,yf,ng,tg,oh,l,sh,ig,rg,ug,fg,eg,og,sg,hg,cg,lg,ag,vg,wg,bg,kg,dg,lh,gg,nn,tn,rn,ah,un,fn,vh,on,sn,hn,cn,ln,ph,an,vn,yn,pn,bn,kn,dn,gn,pf,ntt,ttt,itt,rtt,utt,ftt,ett,ott,stt,htt,ctt,ltt,att,vtt,ytt,ptt,wh,wtt,btt,ktt,bh,dtt,kh,dh,gtt,rr,p,i,nit,gh,iit,rit,uit,fit,eit,oit,hit,cit,lit,ait,vit,rc,yit,uc,pit,wit,kit,bf,fc,uu,ec,d,oc,dit,git,sc,ou,ac,df,vc,fr,wc,ert,ort,srt,hrt,gf,crt,lrt,art,vrt,prt,wrt,bc,iut,rut,uut,fut,eut,out,sut,hut,nl,te,tl,il,lut,rl,er,ul,aut,fl,vut,ie,but,nft,tft,el,re,ift,uft,fft,ol,eft,oft,sft,hft,cft,aft,vft,hl,wft,gft,net,tet,iet,ret,uet,fet,eet,oet,vl,set,yl,pl,wl,het,cet,aet,vet,yet,pet,e,wet,bet,ket,det,not,tot,iot,bl,rot,uot,fot,eot,oot,sot,hot,aot,s,vot,ct;g=typeof document=="object";dl=typeof navigator!="undefined"&&/jsDom/.test(navigator.appName);gl=typeof console!="undefined"&&typeof console.warn=="function"&&typeof console.warn.apply=="function";try{Object.defineProperty({},"test",{value:0});hu=!0}catch(bfi){hu=!1}if(w={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ue=typeof document=="undefined"?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),nt=["o","ms","moz","webkit"],ot=ue?function(n,t){return!t||t===w.html?document.createElement(n):document.createElementNS(t,n)}:function(n,t){if(t&&t!==w.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(n)},g){for(ei=ot("div"),fe=["matches","matchesSelector"],oe=function(n){return function(t,i){return t[n](i)}},cu=fe.length;cu--&&!tt;)if(sr=fe[cu],ei[sr])tt=oe(sr);else for(na=nt.length;na--;)if(ee=nt[cu]+sr.substr(0,1).toUpperCase()+sr.substring(1),ei[ee]){tt=oe(ee);break}tt||(tt=function(n,t){var r,i,u;for(i=n.parentNode,i||(ei.innerHTML="",i=ei,n=n.cloneNode(),ei.appendChild(n)),r=i.querySelectorAll(t),u=r.length;u--;)if(r[u]===n)return!0;return!1})}else tt=null;try{Object.defineProperty({},"test",{value:0});g&&Object.defineProperty(document.createElement("div"),"test",{value:0});it=Object.defineProperty}catch(wot){it=function(n,t,i){n[t]=i.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(wot){throw wot;}g&&Object.defineProperties(ot("div"),{test:{value:0}});oi=Object.defineProperties}catch(wot){oi=function(n,t){for(var i in t)t.hasOwnProperty(i)&&it(n,i,t[i])}}try{Object.create(null);u=Object.create}catch(wot){u=function(){var n=function(){};return function(t,i){var r;return t===null?{}:(n.prototype=t,r=new n,i&&Object.defineProperties(r,i),r)}}()}var gt=Object.prototype.hasOwnProperty,ce=Object.prototype.toString,kot=/^\[object (?:Array|FileList)\]$/;a=function(){};ae={};gl?function(){var n=["%cRactive.js %c0.7.1 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],t="You're running Ractive <@version@> in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";cr=function(){var i=!!console.groupCollapsed;console[i?"groupCollapsed":"log"].apply(console,n);console.log(t);i&&console.groupEnd(n);cr=a};lu=function(n,t){var r,i,u,f;cr();typeof t[t.length-1]=="object"&&(r=t.pop(),i=r.ractive,i&&(u=undefined,i.component&&(u=i.component.name)&&(n="<"+u+"> "+n),f=undefined,(f=r.node||i.fragment&&i.fragment.rendered&&i.find("*"))&&t.push(f)));console.warn.apply(console,["%cRactive.js: %c"+n,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(t))};ve=function(){console.log.apply(console,arguments)}}():lu=ve=cr=a;var got="Bad arguments",ra='A function was specified for "%s" %s, but no %s was returned',hi=function(n,t){return'Missing "'+n+'" '+t+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+t+"s"};ar=function(n,t,i,r){if(n===t)return we(t);if(r){var u=lr("interpolators",i,r);if(u)return u(n,t)||we(t);st(hi(r,"interpolator"))}return vr.number(n,t)||vr.array(n,t)||vr.object(n,t)||we(t)};vr={number:function(n,t){var i;return!at(n)||!at(t)?null:(n=+n,t=+t,i=t-n,!i)?function(){return n}:function(t){return n+t*i}},array:function(n,t){var r,e,u,i;if(!f(n)||!f(t))return null;for(r=[],e=[],i=u=Math.min(n.length,t.length);i--;)e[i]=ar(n[i],t[i]);for(i=u;i<n.length;i+=1)r[i]=n[i];for(i=u;i<t.length;i+=1)r[i]=t[i];return function(n){for(var t=u;t--;)r[t]=e[t](n);return r}},object:function(n,t){var u,e,f,r,i;if(!rt(n)||!rt(t))return null;u=[];r={};f={};for(i in n)gt.call(n,i)&&(gt.call(t,i)?(u.push(i),f[i]=ar(n[i],t[i])):r[i]=n[i]);for(i in t)gt.call(t,i)&&!gt.call(n,i)&&(r[i]=t[i]);return e=u.length,function(n){for(var i=e,t;i--;)t=u[i],r[t]=f[t](n);return r}}};yr={};var ist=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,rst=/\*/,be={},ua=function(n){var i=n.split(".");this.str=n;n[0]==="@"&&(this.isSpecial=!0,this.value=ust(n));this.firstKey=i[0];this.lastKey=i.pop();this.isPattern=rst.test(n);this.parent=n===""?null:t(i.join("."));this.isRoot=!n};ua.prototype={equalsOrStartsWith:function(n){return n===this||this.startsWith(n)},join:function(n){return t(this.isRoot?String(n):this.str+"."+n)},replace:function(n,i){return this===n?i:this.startsWith(n)?i===null?i:t(this.str.replace(n.str+".",i.str+".")):void 0},startsWith:function(n){return n?n&&this.str.substr(0,n.str.length+1)===n.str+".":!1},toString:function(){throw new Error("Bad coercion");},valueOf:function(){throw new Error("Bad coercion");},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=nst(this.str))}};vt=t("");ke="Cannot add to a non-numeric value";oa=est;typeof window=="undefined"?de=null:(function(n,t,i){var r,u;if(!i.requestAnimationFrame){for(r=0;r<n.length&&!i.requestAnimationFrame;++r)i.requestAnimationFrame=i[n[r]+"RequestAnimationFrame"];i.requestAnimationFrame||(u=i.setTimeout,i.requestAnimationFrame=function(n){var i,r,f;return i=Date.now(),r=Math.max(0,16-(i-t)),f=u(function(){n(i+r)},r),t=i+r,f})}}(nt,0,window),de=window.requestAnimationFrame);ge=de;no=typeof window!="undefined"&&window.performance&&typeof window.performance.now=="function"?function(){return window.performance.now()}:function(){return Date.now()};sa={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};h.prototype.fire=function(n,t){function i(i){if(n[i])return t?n[i](t):n[i](),!0}i(this.method);!n[this.method]&&this.deprecate&&i(this.deprecate.deprecated)&&(this.deprecate.message?o(this.deprecate.message):o('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement));t?n.fire(this.event,t):n.fire(this.event)};var k,ro={},aa={},ost={};typeof Promise=="function"?k=Promise:(k=function(n){var e=[],o=[],t=ro,s,i,r,h,u,f;r=function(n){return function(r){t===ro&&(s=r,t=n,i=sst(t===aa?e:o,s),va(i))}};h=r(aa);u=r(ost);try{n(h,u)}catch(c){u(c)}return f={then:function(n,r){var u=new k(function(f,s){var h=function(n,t,i){typeof n=="function"?t.push(function(t){var i;try{i=n(t);ya(u,i,f,s)}catch(r){s(r)}}):t.push(i)};h(n,e,f);h(r,o,s);t!==ro&&va(i)});return u}},f["catch"]=function(n){return this.then(null,n)},f},k.all=function(n){return new k(function(t,i){var r=[],f,u,e;if(!n.length){t(r);return}for(e=function(n,u){n&&typeof n.then=="function"?n.then(function(n){r[u]=n;--f||t(r)},i):(r[u]=n,--f||t(r))},f=u=n.length;u--;)e(n[u],u)})},k.resolve=function(n){return new k(function(t){t(n)})},k.reject=function(n){return new k(function(t,i){i(n)})});pt=k;uo=function(n){do if(n.context!==undefined)return n.context;while(n=n.parent);return vt};eo=function(n,t){this.callback=n;this.parent=t;this.intros=[];this.outros=[];this.children=[];this.totalChildren=this.outroChildren=0;this.detachQueue=[];this.decoratorQueue=[];this.outrosComplete=!1;t&&t.addChild(this)};eo.prototype={addChild:function(n){this.children.push(n);this.totalChildren+=1;this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1;yu(this)},decrementTotal:function(){this.totalChildren-=1;yu(this)},add:function(n){var t=n.isIntro?this.intros:this.outros;t.push(n)},addDecorator:function(n){this.decoratorQueue.push(n)},remove:function(n){var t=n.isIntro?this.intros:this.outros;v(t,n);yu(this)},init:function(){this.ready=!0;yu(this)},detachNodes:function(){this.decoratorQueue.forEach(ba);this.detachQueue.forEach(lst);this.children.forEach(ast)}};ni=[];ka=new h("change");n={start:function(n,t){var i,u;return t&&(i=new pt(function(n){return u=n})),r={previousBatch:r,transitionManager:new eo(u,r&&r.transitionManager),views:[],tasks:[],ractives:[],instance:n},n&&r.ractives.push(n),i},end:function(){da();r.transitionManager.init();r.previousBatch||!r.instance||(r.instance.viewmodel.changes=[]);r=r.previousBatch},addRactive:function(n){r&&ha(r.ractives,n)},registerTransition:function(n){n._manager=r.transitionManager;r.transitionManager.add(n)},registerDecorator:function(n){r.transitionManager.addDecorator(n)},addView:function(n){r.views.push(n)},addUnresolved:function(n){ni.push(n)},removeUnresolved:function(n){v(ni,n)},detachWhenReady:function(n){r.transitionManager.detachQueue.push(n)},scheduleTask:function(n,t){var i;if(r){for(i=r;t&&i.previousBatch;)i=i.previousBatch;i.tasks.push(n)}else n()}};var ti=[],ci={tick:function(){var t,i,r;for(r=no(),n.start(),t=0;t<ti.length;t+=1)i=ti[t],i.tick(r)||ti.splice(t--,1);n.end();ti.length?ge(ci.tick):ci.running=!1},add:function(n){ti.push(n);ci.running||(ci.running=!0,ge(ci.tick))},abort:function(n,t){for(var r=ti.length,i;r--;)i=ti[r],i.root===t&&i.keypath===n&&i.stop()}},oo=ci,ga=function(n){var t;this.startTime=Date.now();for(t in n)n.hasOwnProperty(t)&&(this[t]=n[t]);this.interpolator=ar(this.from,this.to,this.root,this.interpolator);this.running=!0;this.tick()};ga.prototype={tick:function(){var i,r,u,e,f,t;return(t=this.keypath,this.running)?(e=Date.now(),i=e-this.startTime,i>=this.duration)?(t!==null&&(n.start(this.root),this.root.viewmodel.set(t,this.to),n.end()),this.step&&this.step(1,this.to),this.complete(this.to),f=this.root._animations.indexOf(this),f===-1&&o("Animation was not found"),this.root._animations.splice(f,1),this.running=!1,!1):(r=this.easing?this.easing(i/this.duration):i/this.duration,t!==null&&(u=this.interpolator(r),n.start(this.root),this.root.viewmodel.set(t,u),n.end()),this.step&&this.step(r,u),!0):!1},stop:function(){var n;this.running=!1;n=this.root._animations.indexOf(this);n===-1&&o("Animation was not found");this.root._animations.splice(n,1)}};nv=pst;tv={stop:a};iv=wst;rv=new h("detach");uv=bst;fv=kst;ev=function(){var n,t,i;n=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"];t=this.selector;i=n.indexOf(t);i!==-1&&(n.splice(i,1),n[t]=null)};ho=function(n,t){var u,f,i,r,l,e,o,c,s,h;for(u=sv(n.component||n._ractive.proxy),f=sv(t.component||t._ractive.proxy),i=yt(u),r=yt(f);i&&i===r;)u.pop(),f.pop(),l=i,i=yt(u),r=yt(f);if(i=i.component||i,r=r.component||r,s=i.parentFragment,h=r.parentFragment,s===h)return e=s.items.indexOf(i),o=h.items.indexOf(r),e-o||u.length-f.length;if(c=l.fragments)return e=c.indexOf(s),o=c.indexOf(h),e-o||u.length-f.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!");};var dst=function(n,t){var i;return n.compareDocumentPosition?(i=n.compareDocumentPosition(t),i&2?1:-1):ho(n,t)},gst=function(){this.sort(this._isComponentQuery?ho:dst);this._dirty=!1},nht=function(){var t=this;this._dirty||(this._dirty=!0,n.scheduleTask(function(){t._sort()}))},tht=function(n){var t=this.indexOf(this._isComponentQuery?n.instance:n);t!==-1&&this.splice(t,1)};cv=iht;lv=rht;av=uht;vv=fht;yv=eht;pr={enqueue:function(n,t){n.event&&(n._eventQueue=n._eventQueue||[],n._eventQueue.push(n.event));n.event=t},dequeue:function(n){n._eventQueue&&n._eventQueue.length?n.event=n._eventQueue.pop():delete n.event}};wv=sht;bv=hht;kv={capture:!0,noUnwrap:!0,fullRootGet:!0};dv=cht;gv=new h("insert");ty=lht;co=function(n,t,i,r){this.root=n;this.keypath=t;this.callback=i;this.defer=r.defer;this.context=r&&r.context?r.context:n};co.prototype={init:function(n){this.value=this.root.get(this.keypath.str);n!==!1?this.update():this.oldValue=this.value},setValue:function(t){var i=this;lt(t,this.value)||(this.value=t,this.defer&&this.ready?n.scheduleTask(function(){return i.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}};ry=Array.prototype.slice;lo=function(n,t,i,r){this.root=n;this.callback=i;this.defer=r.defer;this.keypath=t;this.regex=new RegExp("^"+t.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$");this.values={};this.defer&&(this.proxies=[]);this.context=r&&r.context?r.context:n};lo.prototype={init:function(n){var i,r;if(i=iy(this.root,this.keypath),n!==!1)for(r in i)i.hasOwnProperty(r)&&this.update(t(r));else this.values=i},update:function(i){var u=this,r;if(i.isPattern){r=iy(this.root,i);for(i in r)r.hasOwnProperty(i)&&this.update(t(i));return}if(!this.root.viewmodel.implicitChanges[i.str]){if(this.defer&&this.ready){n.scheduleTask(function(){return u.getProxy(i).update()});return}this.reallyUpdate(i)}},reallyUpdate:function(n){var t,i,r,u;if(t=n.str,i=this.root.viewmodel.get(n),this.updating){this.values[t]=i;return}this.updating=!0;lt(i,this.values[t])&&this.ready||(r=ry.call(this.regex.exec(t),1),u=[i,this.values[t],t].concat(r),this.values[t]=i,this.callback.apply(this.context,u));this.updating=!1},getProxy:function(n){var t=this;return this.proxies[n.str]||(this.proxies[n.str]={update:function(){return t.reallyUpdate(n)}}),this.proxies[n.str]}};uy={};fy=aht;ey=vht;var oy=function(n){return n.trim()},sy=function(n){return n!==""},yht=pht;hy=wht;cy=bht;var dht=Array.prototype,ii=function(i){return function(r){for(var u,o,a,c,l,s=arguments.length,h=Array(s>1?s-1:0),e=1;e<s;e++)h[e-1]=arguments[e];if(o=[],r=t(ut(r)),u=this.viewmodel.get(r),a=u.length,!f(u))throw new Error("Called ractive."+i+"('"+r.str+"'), but '"+r.str+"' does not refer to an array");return o=ly(u,i,h),l=dht[i].apply(u,h),c=n.start(this,!0).then(function(){return l}),o?this.viewmodel.smartUpdate(r,u,o):this.viewmodel.mark(r),n.end(),c}},ght=ii("pop"),nct=ii("push"),pu,ay,br,vy,vo,yo,tct="/* Ractive.js component styles */\n",yy=[],po=!1;g?(br=document.createElement("style"),br.type="text/css",vy=document.getElementsByTagName("head")[0],yo=!1,vo=br.styleSheet,ay=function(){var n=tct+yy.map(function(n){return"\n/* {"+n.id+"} */\n"+n.styles}).join("\n");vo?vo.cssText=n:br.innerHTML=n;yo||(vy.appendChild(br),yo=!0)},pu={add:function(n){yy.push(n);po=!0},apply:function(){po&&(ay(),po=!1)}}):pu=null;var ict=fct,rct=new h("render"),uct=new h("complete");wo={extend:function(n,t,i){t.adapt=oct(t.adapt,la(i.adapt))},init:function(){}};var sct=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,hct=/\/\*.*?\*\//g,cct=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,lct=/^@media/,py=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g;wy=1;bo={name:"css",extend:function(n,t,i){if(i.css){var r=wy++,u=i.noCssTransform?i.css:act(i.css,r);t.cssId=r;pu.add({id:r,styles:u})}},init:function(){}};wu={name:"data",extend:function(n,t,i){var u=undefined,r=undefined;if(i.data&&rt(i.data))for(u in i.data)r=i.data[u],r&&typeof r=="object"&&(rt(r)||f(r))&&o("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");t.data=by(t.data,i.data)},init:function(n,t,i){var r=by(n.prototype.data,i.data);return typeof r=="function"&&(r=r.call(t)),r||{}},reset:function(n){var t=this.init(n.constructor,n,n.viewmodel);return n.viewmodel.reset(t),!0}};gy=/^\s+/;ko=function(n){this.name="ParseError";this.message=n;try{throw new Error(n);}catch(t){this.stack=t.stack}};ko.prototype=Error.prototype;wt=function(n,t){var i,r,u=0;for(this.str=n,this.options=t||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(n){var t=u+n.length+1;return u=t,t},0),this.init&&this.init(n,t),i=[];this.pos<this.str.length&&(r=this.read());)i.push(r);this.leftover=this.remaining();this.result=this.postProcess?this.postProcess(i,t):i};wt.prototype={read:function(n){var i,t,r,u;for(n||(n=this.converters),i=this.pos,r=n.length,t=0;t<r;t+=1)if(this.pos=i,u=n[t](this))return u;return null},getLinePos:function(n){for(var t=0,i=0,r;n>=this.lineEnds[t];)i=this.lineEnds[t],t+=1;return r=n-i,[t+1,r+1,n]},error:function(n){var t=this.getLinePos(this.pos),u=t[0],f=t[1],e=this.lines[t[0]-1],r=0,o=e.replace(/\t/g,function(n,i){return i<t[1]&&(r+=1),"  "})+"\n"+new Array(t[1]+r).join(" ")+"^----",i=new ko(""+n+" at line "+u+" character "+f+":\n"+o);i.line=t[0];i.character=t[1];i.shortMessage=n;throw i;},matchString:function(n){if(this.str.substr(this.pos,n.length)===n)return this.pos+=n.length,n},matchPattern:function(n){var t;if(t=n.exec(this.remaining()))return this.pos+=t[0].length,t[1]||t[0]},allowWhitespace:function(){this.matchPattern(gy)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}};wt.extend=function(n){var r=this,t,i;t=function(n,t){wt.call(this,n,t)};t.prototype=u(r.prototype);for(i in n)gt.call(n,i)&&(t.prototype[i]=n[i]);return t.extend=wt.extend,t};var np=1,kr=2,bu=3,et=4,wct=5,bct=6,dr=7,ku=8,li=9,tp=10,kct=13,dct=14,ip=15,du=16,rp=17,up=18,go=20,ns=21,fp=22,ep=23,ts=24,op=25,sp=26,hp=27,ri=30,gu=31,is=32,nf=33,tf=34,cp=35,rs=36,lp=40,ai=50,bt=51,ui=52,vi=53,us=54,gct=60,nlt=61,ap=/^[^\s=]+/,tlt=/^\s+/;fs=rlt;vp=/^(\/(?:[^\n\r\u2028\u2029/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/;yp={t:tp,exclude:!0};var pi="Expected a JavaScript expression",pp="Expected closing paren",wp=elt,flt=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;bp=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/;kp=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/;dp=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var gp=function(n){return function(t){var f,r,u,i;for(f=t.pos,r='"',u=!1;!u;)i=t.matchPattern(bp)||t.matchPattern(kp)||t.matchString(n),i?r+=i==='"'?'\\"':i==="\\'"?"'":i:(i=t.matchPattern(dp),i?r+="\\u"+("000"+i.charCodeAt(1).toString(16)).slice(-4):u=!0);return r+='"',JSON.parse(r)}},slt=gp('"'),hlt=gp("'"),es=function(n){var i,t;return(i=n.pos,n.matchString('"'))?(t=hlt(n),!n.matchString('"'))?(n.pos=i,null):{t:ns,v:t}:n.matchString("'")?(t=slt(n),!n.matchString("'"))?(n.pos=i,null):{t:ns,v:t}:null},nw=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,clt=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;iw=llt;uw=function(n){var t,i;return(t=n.pos,n.allowWhitespace(),!n.matchString("{"))?(n.pos=t,null):(i=rw(n),n.allowWhitespace(),!n.matchString("}"))?(n.pos=t,null):{t:ep,m:i}};fw=function(n){var t,i;return(t=n.pos,n.allowWhitespace(),!n.matchString("["))?(n.pos=t,null):(i=os(n),!n.matchString("]"))?(n.pos=t,null):{t:fp,m:i}};ew=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/;ss=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\b/;ow=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;sw=/^[a-zA-Z$_0-9]+(?:(?:\.[a-zA-Z$_0-9]+)|(?:\[[0-9]+\]))*/;hw=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/;lw=function(n){return alt(n)||cw(n)||vlt(n)};aw=function(n){var u,t,r,i;if(t=lw(n),!t)return null;while(t)if(u=n.pos,r=ylt(n))t={t:is,x:t,r:r};else if(n.matchString("("))n.allowWhitespace(),i=os(n),n.allowWhitespace(),n.matchString(")")||n.error(pp),t={t:lp,x:t},i&&(t.o=i);else break;return t};yw=function(n,t){return function(i){var r;return(r=t(i))?r:i.matchString(n)?(i.allowWhitespace(),r=c(i),r||i.error(pi),{s:n,o:r,t:nf}):null}},function(){var n,r,u,i,t;for(i="! ~ + - typeof".split(" "),t=aw,n=0,r=i.length;n<r;n+=1)u=yw(i[n],t),t=u;vw=t}();pw=vw;bw=function(n,t){return function(i){var f,r,u;if(r=t(i),!r)return null;for(;;){if((f=i.pos,i.allowWhitespace(),!i.matchString(n))||n==="in"&&/[a-zA-Z_$0-9]/.test(i.remaining().charAt(0))||(i.allowWhitespace(),u=t(i),!u))return i.pos=f,r;r={t:rs,s:n,o:[r,u]}}}},function(){var n,r,u,i,t;for(i="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),t=pw,n=0,r=i.length;n<r;n+=1)u=bw(i[n],t),t=u;ww=t}();kw=plt;dw=/^[0-9][1-9]*$/;nb=dlt;ib=/^yield\s*/;rb=tat;ub=/^\s*else\s*/;fb=iat;eb=/^\s*elseif\s+/;var ob={each:ui,"if":ai,"if-with":us,"with":vi,unless:bt},rat=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,uat=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,fat=new RegExp("^("+Object.keys(ob).join("|")+")\\b");lb="<!--";ab="-->";vb=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i;rf=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i;as={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};yb=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376];pb=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(as).join("|")+"));?","g");wb=/</g;bb=/>/g;kb=/&/g;var bi=/^\s*\r?\n/,ki=/\r?\n\s*$/,sat=function(n){for(var t,r,u,f,i=1;i<n.length;i+=1)t=n[i],r=n[i-1],u=n[i-2],di(t)&&hat(r)&&di(u)&&ki.test(u)&&bi.test(t)&&(n[i-2]=u.replace(ki,"\n"),n[i]=t.replace(bi,"")),db(t)&&di(r)&&ki.test(r)&&di(t.f[0])&&bi.test(t.f[0])&&(n[i-1]=r.replace(ki,"\n"),t.f[0]=t.f[0].replace(bi,"")),di(t)&&db(r)&&(f=yt(r.f),di(f)&&ki.test(f)&&bi.test(t)&&(r.f[r.f.length-1]=f.replace(ki,"\n"),n[i]=t.replace(bi,"")));return n};var cat=/^[ \t\f\r\n]+/,lat=/[ \t\f\r\n]+$/,aat=function(n,t,i){var r;t&&(r=n[0],typeof r=="string"&&(r=r.replace(cat,""),r?n[0]=r:n.shift()));i&&(r=yt(n),typeof r=="string"&&(r=r.replace(lat,""),r?n[n.length-1]=r:n.pop()))},vat=/[ \t\f\r\n]+/g,yat=/^(?:pre|script|style|textarea)$/i,pat=/^\s+/,wat=/\s+$/;gb=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/;var ps=function(n,t){for(var i,r,u=t.length;u--;){if(i=n.indexOf(t[u]),!i)return 0;i!==-1&&(!r||i<r)&&(r=i)}return r||-1},kat=/^[^\s"'>\/=]+/,dat=/^[^\s"'=<>`]+/;ws={"true":!0,"false":!1,undefined:undefined,"null":null};uk=new RegExp("^(?:"+Object.keys(ws).join("|")+")");fk=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;ek=/\$\{([^\}]+)\}/g;ok=/^\$\{([^\}]+)\}/;sk=/^\s*$/;rk=wt.extend({init:function(n,t){this.values=t.values;this.allowWhitespace()},postProcess:function(n){return n.length!==1||!sk.test(this.leftover)?null:{value:n[0].v}},converters:[function(n){var t;return n.values?(t=n.matchPattern(ok),t&&n.values.hasOwnProperty(t)?{v:n.values[t]}:void 0):null},function(n){var t;if(t=n.matchPattern(uk))return{v:ws[t]}},function(n){var t;if(t=n.matchPattern(fk))return{v:+t}},function(n){var t=es(n),i;return t&&(i=n.values)?{v:t.v.replace(ek,function(n,t){return t in i?i[t]:t})}:t},function(n){var t,i;if(!n.matchString("{"))return null;if(t={},n.allowWhitespace(),n.matchString("}"))return{v:t};while(i=ivt(n)){if(t[i.key]=i.value,n.allowWhitespace(),n.matchString("}"))return{v:t};if(!n.matchString(","))return null}return null},function(n){var t,i;if(!n.matchString("["))return null;if(t=[],n.allowWhitespace(),n.matchString("]"))return{v:t};while(i=n.read()){if(t.push(i.v),n.allowWhitespace(),n.matchString("]"))return{v:t};if(!n.matchString(","))return null;n.allowWhitespace()}return null}]});var uf=function(n,t){var i=new rk(n,{values:t});return i.result},rvt=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/,uvt=/\)\s*$/,fvt=wt.extend({converters:[c]});var evt=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,ovt=/^[\s\n\/>]/,svt=/^on/,hvt=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,cvt=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,lvt={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},avt={exclude:!0},ck;ck={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};lk=/[-/\\^$*+?.()|[\]{}]/g;var wvt=/^<!--\s*/,bvt=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,kvt=/\s*-->/,bs;vk=/^#\s*partial\s+/;var tyt=[klt,gw,sb,nat,tb,nb],yk=[blt],iyt=[gw,sb,tb],pk=undefined;gi=[yi,eat,vvt,pvt];ks=[dvt,gvt];pk=wt.extend({init:function(n,t){var i=t.tripleDelimiters||["{{{","}}}"],r=t.staticDelimiters||["[[","]]"],u=t.staticTripleDelimiters||["[[[","]]]"];this.standardDelimiters=t.delimiters||["{{","}}"];this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:tyt},{isStatic:!1,isTriple:!0,open:i[0],close:i[1],readers:yk},{isStatic:!0,isTriple:!1,open:r[0],close:r[1],readers:iyt},{isStatic:!0,isTriple:!0,open:u[0],close:u[1],readers:yk}];this.sortMustacheTags();this.sectionDepth=0;this.elementStack=[];this.interpolate={script:!t.interpolate||t.interpolate.script!==!1,style:!t.interpolate||t.interpolate.style!==!1};t.sanitize===!0&&(t.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0});this.stripComments=t.stripComments!==!1;this.preserveWhitespace=t.preserveWhitespace;this.sanitizeElements=t.sanitize&&t.sanitize.elements;this.sanitizeEventAttributes=t.sanitize&&t.sanitize.eventAttributes;this.includeLinePositions=t.includeLinePositions},postProcess:function(n){return n.length?(this.sectionDepth>0&&this.error("A section was left open"),ht(n[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace),n[0]):{t:[],v:or}},converters:[nyt],sortMustacheTags:function(){this.tags.sort(function(n,t){return t.open.length-n.open.length})}});wk=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"];ds={parse:bk,fromId:uyt,isHashedId:kk,isParsed:fyt,getParseOptions:eyt,createHelper:ryt};y=ds;ef={name:"template",extend:function(n,t,i){var r;"template"in i&&(r=i.template,t.template=typeof r=="function"?r:of(r,t))},init:function(n,t,i){var r,u;r="template"in i?i.template:n.prototype.template;typeof r=="function"&&(u=r,r=dk(t,u),t._config.template={fn:u,result:r});r=of(r,t);t.template=r.t;r.p&&gk(t.partials,r.p)},reset:function(n){var i=oyt(n),t;if(i)return t=of(i,n),n.template=t.t,gk(n.partials,t.p,!0),!0}};nd=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"];sf=function(n,t){this.name=n;this.useDefaults=t};sf.prototype={constructor:sf,extend:function(n,t,i){this.configure(this.useDefaults?n.defaults:n,this.useDefaults?t:t.constructor,i)},init:function(){},configure:function(n,t,i){var r=this.name,o=i[r],f,e;f=u(n[r]);for(e in o)f[e]=o[e];t[r]=f},reset:function(n){var t=n[this.name],i=!1;return Object.keys(t).forEach(function(n){var r=t[n];r._fn&&(r._fn.isOwner?t[n]=r._fn:delete t[n],i=!0)}),i}};nr=nd.map(function(n){return new sf(n,n==="computed")});gs=hyt;tr={adapt:wo,css:bo,data:wu,template:ef};cf=Object.keys(kl);rd=fd(cf.filter(function(n){return!tr[n]}));id=fd(cf.concat(nr.map(function(n){return n.name})));nh=[].concat(cf.filter(function(n){return!nr[n]&&!tr[n]}),nr,tr.data,tr.template,tr.css);hf={extend:function(n,t,i){return ud("extend",n,t,i)},init:function(n,t,i){return ud("init",n,t,i)},reset:function(n){return nh.filter(function(t){return t.reset&&t.reset(n)}).map(function(n){return n.name})},order:nh};ed=vyt;od=yyt;sd=pyt;hd=wyt;cd=byt;ld=kyt;ad=dyt;vd=gyt;yd=npt;pd=tpt;wd=ipt;lf=function(){return se(this.node)};ih=function(n){this.type=np;this.text=n.template};ih.prototype={detach:lf,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(n){return n?ys(this.text):this.text},unrender:function(n){if(n)return this.detach()}};fi=rpt;bd=upt;af=function(t,i,r){var u;this.ref=i;this.resolved=!1;this.root=t.root;this.parentFragment=t.parentFragment;this.callback=r;u=vu(t.root,i,t.parentFragment);u!=undefined?this.resolve(u):n.addUnresolved(this)};af.prototype={resolve:function(t){this.keypath&&!t&&n.addUnresolved(this);this.resolved=!0;this.keypath=t;this.callback(t)},forceResolution:function(){this.resolve(t(this.ref))},rebind:function(n,t){var i;this.keypath!=undefined&&(i=this.keypath.replace(n,t),i!==undefined&&this.resolve(i))},unbind:function(){this.resolved||n.removeUnresolved(this)}};rh=function(n,t,i){this.parentFragment=n.parentFragment;this.ref=t;this.callback=i;this.rebind()};kd={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};rh.prototype={rebind:function(){var u=this.ref,n=this.parentFragment,i=kd[u],r;if(!i)throw new Error('Unknown special reference "'+u+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(t("@"+i.prefix+uh(this.cached,i)));if(i.prop.indexOf("index")!==-1||i.prop.indexOf("key")!==-1)while(n){if(n.owner.currentSubtype===ui&&(r=uh(n,i))!==undefined)return this.cached=n,n.registerIndexRef(this),this.callback(t("@"+i.prefix+r));n=!n.parent&&n.owner&&n.owner.component&&n.owner.component.parentFragment&&!n.owner.component.instance.isolated?n.owner.component.parentFragment:n.parent}else while(n){if((r=uh(n,i))!==undefined)return this.callback(t("@"+i.prefix+r.str));n=n.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};fh=function(n,t,i){this.parentFragment=n.parentFragment;this.ref=t;this.callback=i;t.ref.fragment.registerIndexRef(this);this.rebind()};fh.prototype={rebind:function(){var n,i=this.ref.ref;n=i.ref.t==="k"?"k"+i.fragment.key:"i"+i.fragment.index;n!==undefined&&this.callback(t("@"+n))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}};ir.resolve=function(n){var i={},r,t;for(r in n.refs)t=n.refs[r],i[t.ref.n]=t.ref.t==="k"?t.fragment.key:t.fragment.index;return i};vf={};gd=Function.prototype.bind;iu=function(n,t,i,r){var u=this,f;f=n.root;this.root=f;this.parentFragment=t;this.callback=r;this.owner=n;this.str=i.s;this.keypaths=[];this.pending=i.r.length;this.refResolvers=i.r.map(function(n,t){return tu(u,n,function(n){u.resolve(t,n)})});this.ready=!0;this.bubble()};iu.prototype={bubble:function(){this.ready&&(this.uniqueString=ept(this.str,this.keypaths),this.keypath=opt(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var n;n=this.refResolvers.pop();)n.unbind()},resolve:function(n,t){this.keypaths[n]=t;this.bubble()},createEvaluator:function(){var i=this,t,r,u,n,f;n=this.keypath;t=this.root.viewmodel.computations[n.str];t?this.root.viewmodel.mark(n):(f=dd(this.str,this.refResolvers.length),r=this.keypaths.map(function(n){var t;return n==="undefined"?function(){return undefined}:n.isSpecial?(t=n.value,function(){return t}):function(){var t=i.root.viewmodel.get(n,{noUnwrap:!0,fullRootGet:!0});return typeof t=="function"&&(t=hpt(t,i.root)),t}}),u={deps:this.keypaths.filter(spt),getter:function(){var n=r.map(fpt);return f.apply(null,n)}},t=this.root.viewmodel.compute(n,u))},rebind:function(n,t){this.refResolvers.forEach(function(i){return i.rebind(n,t)})}};eh=function(n,t,i){var r=this;this.resolver=t;this.root=t.root;this.parentFragment=i;this.viewmodel=t.root.viewmodel;typeof n=="string"?this.value=n:n.t===ri?this.refResolver=tu(this,n.n,function(n){r.resolve(n)}):new iu(t,i,n,function(n){r.resolve(n)})};eh.prototype={resolve:function(n){this.keypath&&this.viewmodel.unregister(this.keypath,this);this.keypath=n;this.value=this.viewmodel.get(n);this.bind();this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(n,t){this.refResolver&&this.refResolver.rebind(n,t)},setValue:function(n){this.value=n;this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this);this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};yf=function(n,t,i){var r=this,e,u,o,f;this.parentFragment=f=n.parentFragment;this.root=e=n.root;this.mustache=n;this.ref=u=t.r;this.callback=i;this.unresolved=[];(o=vu(e,u,f))?this.base=o:this.baseResolver=new af(this,u,function(n){r.base=n;r.baseResolver=null;r.bubble()});this.members=t.m.map(function(n){return new eh(n,r,f)});this.ready=!0;this.bubble()};yf.prototype={getKeypath:function(){var n=this.members.map(cpt);return!n.every(lpt)||this.baseResolver?null:this.base.join(n.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(ft)},rebind:function(n,t){var r,i;this.base&&(i=this.base.replace(n,t),i&&i!==this.base&&(this.base=i,r=!0));this.members.forEach(function(i){i.rebind(n,t)&&(r=!0)});r&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=t(this.ref),this.baseResolver.unbind(),this.baseResolver=null);this.members.forEach(apt);this.bubble()}};ng=vpt;tg=ypt;oh=ppt;l={getValue:bd,init:ng,resolve:tg,rebind:oh};sh=function(n){this.type=kr;l.init(this,n)};sh.prototype={update:function(){this.node.data=this.value==undefined?"":this.value},resolve:l.resolve,rebind:l.rebind,detach:lf,unbind:fi,render:function(){return this.node||(this.node=document.createTextNode(he(this.value))),this.node},unrender:function(n){n&&se(this.node)},getValue:l.getValue,setValue:function(t){var i;this.keypath&&(i=this.root.viewmodel.wrapped[this.keypath.str])&&(t=i.get());lt(t,this.value)||(this.value=t,this.parentFragment.bubble(),this.node&&n.addView(this))},firstNode:function(){return this.node},toString:function(n){var t=""+he(this.value);return n?ys(t):t}};ig=wpt;rg=bpt;ug=kpt;fg=dpt;eg=gpt;og=nwt;sg=twt;hg=iwt;cg=rwt;lg=function(n,t){l.rebind.call(this,n,t)};ag=fwt;vg=ewt;wg=awt;bg=vwt;kg=ywt;dg=bwt;lh=function(n){this.type=et;this.subtype=this.currentSubtype=n.template.n;this.inverted=this.subtype===bt;this.pElement=n.pElement;this.fragments=[];this.fragmentsToCreate=[];this.fragmentsToRender=[];this.fragmentsToUnrender=[];n.template.i&&(this.indexRefs=n.template.i.split(",").map(function(n,t){return{n:n,t:t===0?"k":"i"}}));this.renderedFragments=[];this.length=0;l.init(this,n)};lh.prototype={bubble:ig,detach:rg,find:ug,findAll:fg,findAllComponents:eg,findComponent:og,findNextNode:sg,firstNode:hg,getIndexRef:function(n){var t,i;if(this.indexRefs)for(t=this.indexRefs.length;t--;)if(i=this.indexRefs[t],i.n===n)return i},getValue:l.getValue,shuffle:cg,rebind:lg,render:ag,resolve:l.resolve,setValue:vg,toString:wg,unbind:bg,unrender:kg,update:dg};gg=kwt;nn=dwt;tn=gwt;rn=nbt;ah={};try{ot("table").innerHTML="foo"}catch(wot){un=!0;fn={TABLE:['<table class="x">',"<\/table>"],THEAD:['<table><thead class="x">',"<\/thead><\/table>"],TBODY:['<table><tbody class="x">',"<\/tbody><\/table>"],TR:['<table><tr class="x">',"<\/tr><\/table>"],SELECT:['<select class="x">',"<\/select>"]}}vh=function(n,t,i){var r,u=[],e,o,s,f;if(n!=null&&n!==""){for(un&&(e=fn[t.tagName])?(r=yh("DIV"),r.innerHTML=e[0]+n+e[1],r=r.querySelector(".x"),r.tagName==="SELECT"&&(o=r.options[r.selectedIndex])):t.namespaceURI===w.svg?(r=yh("DIV"),r.innerHTML='<svg class="x">'+n+"<\/svg>",r=r.querySelector(".x")):(r=yh(t.tagName),r.innerHTML=n,r.tagName==="SELECT"&&(o=r.options[r.selectedIndex]));s=r.firstChild;)u.push(s),i.appendChild(s);if(t.tagName==="SELECT")for(f=u.length;f--;)u[f]!==o&&(u[f].selected=!1)}return u};on=ibt;sn=rbt;hn=ubt;cn=fbt;ln=ebt;ph=function(n){this.type=bu;l.init(this,n)};ph.prototype={detach:gg,find:nn,findAll:tn,firstNode:rn,getValue:l.getValue,rebind:l.rebind,render:on,resolve:l.resolve,setValue:sn,toString:hn,unbind:fi,unrender:cn,update:ln};an=function(){this.parentFragment.bubble()};vn=obt;var sbt=function(n){return this.node?tt(this.node,n)?this.node:this.fragment&&this.fragment.find?this.fragment.find(n):void 0:null},hbt=function(n,t){t._test(this,!0)&&t.live&&(this.liveQueries||(this.liveQueries=[])).push(t);this.fragment&&this.fragment.findAll(n,t)},cbt=function(n,t){this.fragment&&this.fragment.findAllComponents(n,t)},lbt=function(n){if(this.fragment)return this.fragment.findComponent(n)},abt=vbt;yn=ybt;pn=pbt;var wn=/^true|on|yes|1$/i,wbt=/^[0-9]+$/,bbt=function(n,t){var i,r,u;return u=t.a||{},r={},i=u.twoway,i!==undefined&&(r.twoway=i===0||wn.test(i)),i=u.lazy,i!==undefined&&(r.lazy=i!==0&&wbt.test(i)?parseInt(i):i===0||wn.test(i)),r},kbt=dbt;bn="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" ");kn="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" ");dn=function(n){for(var i={},t=n.length;t--;)i[n[t].toLowerCase()]=n[t];return i};gn=dn(bn.concat(kn));pf=function(n){var t=n.toLowerCase();return gn[t]||t};ntt=function(n,t){var r,i;if(r=t.indexOf(":"),r!==-1&&(i=t.substr(0,r),i!=="xmlns")){if(t=t.substring(r+1),n.name=pf(t),n.namespace=w[i.toLowerCase()],n.namespacePrefix=i,!n.namespace)throw'Unknown namespace ("'+i+'")';return}n.name=n.element.namespace!==w.html?pf(t):t};ttt=nkt;itt=tkt;rtt=ikt;utt={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};ftt=rkt;ett=fkt;ott=ekt;stt=okt;htt=skt;ctt=hkt;ltt=ckt;att=lkt;vtt=akt;ytt=vkt;ptt=ykt;wh=pkt;wtt=wkt;btt=bkt;ktt=kkt;bh=function(n){this.init(n)};bh.prototype={bubble:kbt,init:ttt,rebind:itt,render:rtt,toString:ftt,unbind:ett,update:ktt};dtt=function(n,t){var i,r,u=[];for(i in t)i!=="twoway"&&i!=="lazy"&&t.hasOwnProperty(i)&&(r=new bh({element:n,name:i,value:t[i],root:n.root}),u[i]=r,i!=="value"&&u.push(r));return(r=u.value)&&u.push(r),u};typeof document!="undefined"&&(kh=ot("div"));dh=function(n,t){this.element=n;this.root=n.root;this.parentFragment=n.parentFragment;this.attributes=[];this.fragment=new e({root:n.root,owner:this,template:[t]})};dh.prototype={bubble:function(){this.node&&this.update();this.element.bubble()},rebind:function(n,t){this.fragment.rebind(n,t)},render:function(n){this.node=n;this.isSvg=n.namespaceURI===w.svg;this.update()},unbind:function(){this.fragment.unbind()},update:function(){var t=this,i,n;i=this.fragment.toString();n=dkt(i,this.isSvg);this.attributes.filter(function(t){return gkt(n,t)}).forEach(function(n){t.node.removeAttribute(n.name)});n.forEach(function(n){t.node.setAttribute(n.name,n.value)});this.attributes=n},toString:function(){return this.fragment.toString()}};gtt=function(n,t){return t?t.map(function(t){return new dh(n,t)}):[]};rr=function(n){var t,i,r,u,f;if(this.element=n,this.root=n.root,this.attribute=n.attributes[this.name||"value"],t=this.attribute.interpolator,t.twowayBinding=this,i=t.keypath){if(i.str.slice(-1)==="}")return b("Two-way binding does not work with expressions (`%s` on <%s>)",t.resolver.uniqueString,n.name,{ractive:this.root}),!1;if(i.isSpecial)return b("Two-way binding does not work with %s",t.resolver.ref,{ractive:this.root}),!1}else f=t.template.r?"'"+t.template.r+"' reference":"expression",o("The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",f,{ractive:this.root}),t.resolver.forceResolution(),i=t.keypath;this.attribute.isTwoway=!0;this.keypath=i;r=this.root.viewmodel.get(i);r===undefined&&this.getInitialValue&&(r=this.getInitialValue(),r!==undefined&&this.root.viewmodel.set(i,r));(u=ndt(n))&&(this.resetValue=r,u.formBindings.push(this))};rr.prototype={handleChange:function(){var t=this;n.start(this.root);this.attribute.locked=!0;this.root.viewmodel.set(this.keypath,this.getValue());n.scheduleTask(function(){return t.attribute.locked=!1});n.end()},rebound:function(){var i,t,n;(t=this.keypath,n=this.attribute.interpolator.keypath,t!==n)&&(v(this.root._twowayBindings[t.str],this),this.keypath=n,i=this.root._twowayBindings[n.str]||(this.root._twowayBindings[n.str]=[]),i.push(this))},unbind:function(){}};rr.extend=function(n){var i=this,t;return t=function(n){rr.call(this,n);this.init&&this.init()},t.prototype=u(i.prototype),si(t.prototype,n),t.extend=rr.extend,t};p=rr;i=tdt;nit=p.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var n=this.element.node;n.addEventListener("change",i,!1);this.root.lazy||(n.addEventListener("input",i,!1),n.attachEvent&&n.addEventListener("keyup",i,!1))},unrender:function(){var n=this.element.node;n.removeEventListener("change",i,!1);n.removeEventListener("input",i,!1);n.removeEventListener("keyup",i,!1)},getValue:function(){return this.element.node.innerHTML}});gh={};var idt=p.extend({name:"checked",init:function(){this.siblings=nc(this.root._guid,"radio",this.element.getAttribute("name"));this.siblings.push(this)},render:function(){var n=this.element.node;n.addEventListener("change",i,!1);n.attachEvent&&n.addEventListener("click",i,!1)},unrender:function(){var n=this.element.node;n.removeEventListener("change",i,!1);n.removeEventListener("click",i,!1)},handleChange:function(){n.start(this.root);this.siblings.forEach(function(n){n.root.viewmodel.set(n.keypath,n.getValue())});n.end()},getValue:function(){return this.element.node.checked},unbind:function(){v(this.siblings,this)}}),rdt=p.extend({name:"name",init:function(){this.siblings=nc(this.root._guid,"radioname",this.keypath.str);this.siblings.push(this);this.radioName=!0},getInitialValue:function(){if(this.element.getAttribute("checked"))return this.element.getAttribute("value")},render:function(){var n=this.element.node;n.name="{{"+this.keypath.str+"}}";n.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value");n.addEventListener("change",i,!1);n.attachEvent&&n.addEventListener("click",i,!1)},unrender:function(){var n=this.element.node;n.removeEventListener("change",i,!1);n.removeEventListener("click",i,!1)},getValue:function(){var n=this.element.node;return n._ractive?n._ractive.value:n.value},handleChange:function(){this.element.node.checked&&p.prototype.handleChange.call(this)},rebound:function(n,t){var i;p.prototype.rebound.call(this,n,t);(i=this.element.node)&&(i.name="{{"+this.keypath.str+"}}")},unbind:function(){v(this.siblings,this)}}),udt=p.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var n,t;this.checkboxName=!0;this.siblings=nc(this.root._guid,"checkboxes",this.keypath.str);this.siblings.push(this);this.noInitialValue&&(this.siblings.noInitialValue=!0);this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(n=this.root.viewmodel.get(this.keypath),t=this.element.getAttribute("value"),n.push(t))},unbind:function(){v(this.siblings,this)},render:function(){var n=this.element.node,t,r;t=this.root.viewmodel.get(this.keypath);r=this.element.getAttribute("value");this.isChecked=f(t)?ca(t,r):t==r;n.name="{{"+this.keypath.str+"}}";n.checked=this.isChecked;n.addEventListener("change",i,!1);n.attachEvent&&n.addEventListener("click",i,!1)},unrender:function(){var n=this.element.node;n.removeEventListener("change",i,!1);n.removeEventListener("click",i,!1)},changed:function(){var n=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===n},handleChange:function(){this.isChecked=this.element.node.checked;p.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(fdt).map(edt)}});var odt=p.extend({name:"checked",render:function(){var n=this.element.node;n.addEventListener("change",i,!1);n.attachEvent&&n.addEventListener("click",i,!1)},unrender:function(){var n=this.element.node;n.removeEventListener("change",i,!1);n.removeEventListener("click",i,!1)},getValue:function(){return this.element.node.checked}}),tc=p.extend({getInitialValue:function(){var t=this.element.options,r,n,i,u;if(this.element.getAttribute("value")===undefined&&(n=r=t.length,r)){while(n--)if(t[n].getAttribute("selected")){i=t[n].getAttribute("value");u=!0;break}if(!u)while(++n<r)if(!t[n].getAttribute("disabled")){i=t[n].getAttribute("value");break}return i!==undefined&&(this.element.attributes.value.value=i),i}},render:function(){this.element.node.addEventListener("change",i,!1)},unrender:function(){this.element.node.removeEventListener("change",i,!1)},setValue:function(n){this.root.viewmodel.set(this.keypath,n)},getValue:function(){var t,n,r,i;for(t=this.element.node.options,r=t.length,n=0;n<r;n+=1)if(i=t[n],t[n].selected)return i._ractive?i._ractive.value:i.value},forceUpdate:function(){var i=this,t=this.getValue();t!==undefined&&(this.attribute.locked=!0,n.scheduleTask(function(){return i.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,t))}}),sdt=tc.extend({getInitialValue:function(){return this.element.options.filter(function(n){return n.getAttribute("selected")}).map(function(n){return n.getAttribute("value")})},render:function(){var n;this.element.node.addEventListener("change",i,!1);n=this.root.viewmodel.get(this.keypath);n===undefined&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",i,!1)},setValue:function(){throw new Error("TODO not implemented yet");},getValue:function(){var i,r,t,u,n,f;for(i=[],r=this.element.node.options,u=r.length,t=0;t<u;t+=1)n=r[t],n.selected&&(f=n._ractive?n._ractive.value:n.value,i.push(f));return i},handleChange:function(){var t,n,i;return t=this.attribute,n=t.value,i=this.getValue(),n!==undefined&&to(i,n)||tc.prototype.handleChange.call(this),this},forceUpdate:function(){var i=this,t=this.getValue();t!==undefined&&(this.attribute.locked=!0,n.scheduleTask(function(){return i.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,t))},updateModel:function(){this.attribute.value!==undefined&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),hdt=p.extend({render:function(){this.element.node.addEventListener("change",i,!1)},unrender:function(){this.element.node.removeEventListener("change",i,!1)},getValue:function(){return this.element.node.files}}),wf;wf=p.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var t=this.element.node,n,r=!1;this.rendered=!0;n=this.root.lazy;this.element.lazy===!0?n=!0:this.element.lazy===!1?n=!1:at(this.element.lazy)?(n=!1,r=+this.element.lazy):at(n||"")&&(r=+n,n=!1,this.element.lazy=r);this.handler=r?cdt:i;t.addEventListener("change",i,!1);n||(t.addEventListener("input",this.handler,!1),t.attachEvent&&t.addEventListener("keyup",this.handler,!1));t.addEventListener("blur",tit,!1)},unrender:function(){var n=this.element.node;this.rendered=!1;n.removeEventListener("change",i,!1);n.removeEventListener("input",this.handler,!1);n.removeEventListener("keyup",this.handler,!1);n.removeEventListener("blur",tit,!1)}});iit=wf.extend({getInitialValue:function(){return undefined},getValue:function(){var n=parseFloat(this.element.node.value);return isNaN(n)?undefined:n}});rit=adt;uit=vdt;fit=ydt;eit=pdt;oit=/^event(?:\.(.+))?/;var ddt=ngt,ic={},gdt={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0};hit=igt;cit=rgt;lit=ugt;ait=fgt;vit=egt;rc=function(n,t,i){this.init(n,t,i)};rc.prototype={bubble:rit,fire:uit,getAction:fit,init:eit,listen:ddt,rebind:hit,render:cit,resolve:lit,unbind:ait,unrender:vit};yit=function(n,t){var r,i,u,f,e=[];for(i in t)if(t.hasOwnProperty(i))for(u=i.split("-"),r=u.length;r--;)f=new rc(n,u[r],t[i]),e.push(f);return e};uc=function(n,t){var u=this,r,i,f;(this.element=n,this.root=r=n.root,i=t.n||t,typeof i=="string"||(f=new e({template:i,root:r,owner:n}),i=f.toString(),f.unbind(),i!==""))&&(t.a?this.params=t.a:t.d&&(this.fragment=new e({template:t.d,root:r,owner:n}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0;u.params=this.getArgsList();u.ready&&u.update()}),this.fn=lr("decorators",r,i),this.fn||st(hi(i,"decorator")))};uc.prototype={init:function(){var t,n,i;if(t=this.element.node,this.params?(i=[t].concat(this.params),n=this.fn.apply(this.root,i)):n=this.fn.call(this.root,t),!n||!n.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=n;this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(n,t){this.fragment&&this.fragment.rebind(n,t)},teardown:function(n){this.torndown=!0;this.ready&&this.actual.teardown();!n&&this.fragment&&this.fragment.unbind()}};pit=vgt;wit=ygt;kit=dgt;bf=function(n){return n.replace(/-([a-zA-Z])/g,function(n,t){return t.toUpperCase()})};g?(uu={},ec=ot("div").style,fc=function(n){var t,i,r;if(n=bf(n),!uu[n])if(ec[n]!==undefined)uu[n]=n;else for(r=n.charAt(0).toUpperCase()+n.substring(1),t=nt.length;t--;)if(i=nt[t],ec[i+r]!==undefined){uu[n]=i+r;break}return uu[n]}):fc=null;d=fc;g?(dit=window.getComputedStyle||legacy.getComputedStyle,oc=function(n){var i,r,u,e,t;if(i=dit(this.node),typeof n=="string")return t=i[d(n)],t==="0px"&&(t=0),t;if(!f(n))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(r={},u=n.length;u--;)e=n[u],t=i[d(e)],t==="0px"&&(t=0),r[e]=t;return r}):oc=null;git=function(n,t){var i;if(typeof n=="string")this.node.style[d(n)]=t;else for(i in n)n.hasOwnProperty(i)&&(this.node.style[d(i)]=n[i]);return this};sc=function(n){var t;this.duration=n.duration;this.step=n.step;this.complete=n.complete;typeof n.easing=="string"?(t=n.root.easing[n.easing],t||(b(hi(n.easing,"easing")),t=nrt)):t=typeof n.easing=="function"?n.easing:nrt;this.easing=t;this.start=no();this.end=this.start+this.duration;this.running=!0;oo.add(this)};sc.prototype={tick:function(n){var t,i;return this.running?n>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(t=n-this.start,i=this.easing(t/this.duration),this.step&&this.step(i),!0):!1},stop:function(){this.abort&&this.abort();this.running=!1}};var ggt=new RegExp("^-(?:"+nt.join("|")+")-"),nnt=function(n){return n.replace(ggt,"")},tnt=new RegExp("^(?:"+nt.join("|")+")([A-Z])"),trt=function(n){return n?(tnt.test(n)&&(n="-"+n),n.replace(/[A-Z]/g,function(n){return"-"+n.toLowerCase()})):""},hc,cc,ur,fu,eu,irt,rrt,urt,lc={},kf={};if(g?(cc=ot("div").style,function(){cc.transition!==undefined?(ur="transition",fu="transitionend",eu=!0):cc.webkitTransition!==undefined?(ur="webkitTransition",fu="webkitTransitionEnd",eu=!0):eu=!1}(),ur&&(irt=ur+"Duration",rrt=ur+"Property",urt=ur+"TimingFunction"),hc=function(n,t,i,r,u){setTimeout(function(){var c,s,h,f,e;f=function(){s&&h&&(n.root.fire(n.name+":end",n.node,n.isIntro),u())};c=(n.node.namespaceURI||"")+n.node.tagName;n.node.style[rrt]=r.map(d).map(trt).join(",");n.node.style[urt]=trt(i.easing||"linear");n.node.style[irt]=i.duration/1e3+"s";e=function(t){var i;(i=r.indexOf(bf(nnt(t.propertyName))),i!==-1&&r.splice(i,1),r.length)||(n.node.removeEventListener(fu,e,!1),h=!0,f())};n.node.addEventListener(fu,e,!1);setTimeout(function(){for(var p=r.length,l,a,y,v=[],u,w;p--;)u=r[p],l=c+u,eu&&!kf[l]&&(n.node.style[d(u)]=t[u],lc[l]||(a=n.getStyle(u),lc[l]=n.getStyle(u)!=t[u],kf[l]=!lc[l],kf[l]&&(n.node.style[d(u)]=a))),(!eu||kf[l])&&(a===undefined&&(a=n.getStyle(u)),y=r.indexOf(u),y===-1?o("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:n.node}):r.splice(y,1),w=/[^\d]*$/.exec(t[u])[0],v.push({name:d(u),interpolator:ar(parseFloat(a),parseFloat(t[u])),suffix:w}));v.length?new sc({root:n.root,duration:i.duration,easing:bf(i.easing||""),step:function(t){for(var i,r=v.length;r--;)i=v[r],n.node.style[i.name]=i.interpolator(t)+i.suffix},complete:function(){s=!0;f()}}):s=!0;r.length||(n.node.removeEventListener(fu,e,!1),h=!0,f())},0)},i.delay||0)}):hc=null,typeof document!="undefined"){if(ou="hidden",fr={},ou in document)df="";else for(vc=nt.length;vc--;)ac=nt[vc],ou=ac+"Hidden",ou in document&&(df=ac);df!==undefined?(document.addEventListener(df+"visibilitychange",frt),frt()):("onfocusout"in document?(document.addEventListener("focusout",yc),document.addEventListener("focusin",pc)):(window.addEventListener("pagehide",yc),window.addEventListener("blur",yc),window.addEventListener("pageshow",pc),window.addEventListener("focus",pc)),fr.hidden=!1)}g?(ert=window.getComputedStyle||legacy.getComputedStyle,wc=function(n,t,i){var u=this,r;if(arguments.length===4)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");return fr.hidden?(this.setStyle(n,t),ort||(ort=pt.resolve())):(typeof n=="string"?(r={},r[n]=t):(r=n,i=t),i||(b('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),i=this),new pt(function(n){var o,e,h,t,c,s,f;if(!i.duration){u.setStyle(r);n();return}for(o=Object.keys(r),e=[],h=ert(u.node),c={},s=o.length;s--;)f=o[s],t=h[d(f)],t==="0px"&&(t=0),t!=r[f]&&(e.push(f),u.node.style[d(f)]=t);if(!e.length){n();return}hc(u,r,i,e,n)}))}):wc=null;srt=function(n,t){return typeof n=="number"?n={duration:n}:typeof n=="string"?n=n==="slow"?{duration:600}:n==="fast"?{duration:200}:{duration:400}:n||(n={}),bot({},n,t)};hrt=int;gf=function(n,t,i){this.init(n,t,i)};gf.prototype={init:kit,start:hrt,getStyle:oc,setStyle:git,animateStyle:wc,processParams:srt};crt=unt;lrt=function(){var n=this.node,t=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(n.type="text/css"),n.styleSheet)n.styleSheet.cssText=t;else{while(n.hasChildNodes())n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}};art=function(){this.node.type&&this.node.type!=="text/javascript"||o("Script tag was updated. This does not cause the code to be re-evaluated!",{ractive:this.root});this.node.text=this.fragment.toString(!1)};vrt=function(){var n,t;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(n="<"+this.template.e,n+=this.attributes.map(yrt).join("")+this.conditionalAttributes.map(yrt).join(""),this.name==="option"&&snt(this)&&(n+=" selected"),this.name==="input"&&hnt(this)&&(n+=" checked"),n+=">",this.name==="textarea"&&this.getAttribute("value")!==undefined?n+=ys(this.getAttribute("value")):this.getAttribute("contenteditable")!==undefined&&(n+=this.getAttribute("value")||""),this.fragment&&(t=this.name!=="script"&&this.name!=="style",n+=this.fragment.toString(t)),rf.test(this.template.e)||(n+="<\/"+this.template.e+">"),n)};prt=cnt;wrt=lnt;bc=function(n){this.init(n)};bc.prototype={bubble:an,detach:vn,find:sbt,findAll:hbt,findAllComponents:cbt,findComponent:lbt,findNextNode:abt,firstNode:yn,getAttribute:pn,init:pit,rebind:wit,render:crt,toString:vrt,unbind:prt,unrender:wrt};var brt=/^\s*$/,vnt=/^\s*/,ynt=function(n){var t,i,r,u;return t=n.split("\n"),i=t[0],i!==undefined&&brt.test(i)&&t.shift(),r=yt(t),r!==undefined&&brt.test(r)&&t.pop(),u=t.reduce(pnt,null),u&&(n=t.map(function(n){return n.replace(u,"")}).join("\n")),n};var knt=function(n,t){return t?n.split("\n").map(function(n,i){return i?t+n:n}).join("\n"):n},grt='Could not find template for partial "%s"',nut=function(n){var t,i;t=this.parentFragment=n.parentFragment;this.root=t.root;this.type=ku;this.index=n.index;this.name=n.template.r;this.rendered=!1;this.fragment=this.fragmentToRender=this.fragmentToUnrender=null;l.init(this,n);this.keypath||((i=kc(this.root,this.name,t))?(fi.call(this),this.isNamed=!0,this.setTemplate(i)):b(grt,this.name))};nut.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(n){return this.fragment.find(n)},findAll:function(n,t){return this.fragment.findAll(n,t)},findComponent:function(n){return this.fragment.findComponent(n)},findAllComponents:function(n,t){return this.fragment.findAllComponents(n,t)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:this.value===undefined?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(n,t){this.isNamed||oh.call(this,n,t);this.fragment&&this.fragment.rebind(n,t)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:l.resolve,setValue:function(t){var i;(t===undefined||t!==this.value)&&(t!==undefined&&(i=kc(this.root,""+t,this.parentFragment)),!i&&this.name&&(i=kc(this.root,this.name,this.parentFragment))&&(fi.call(this),this.isNamed=!0),i||b(grt,this.name,{ractive:this.root}),this.value=t,this.setTemplate(i||[]),this.bubble(),this.rendered&&n.addView(this))},setTemplate:function(n){this.fragment&&(this.fragment.unbind(),this.rendered&&(this.fragmentToUnrender=this.fragment));this.fragment=new e({template:n,root:this.root,owner:this,pElement:this.parentFragment.pElement});this.fragmentToRender=this.fragment},toString:function(n){var t,i,r,u;return(t=this.fragment.toString(n),i=this.parentFragment.items[this.index-1],!i||i.type!==np)?t:(r=i.text.split("\n").pop(),u=/^\s+$/.exec(r))?knt(t,u[0]):t},unbind:function(){this.isNamed||fi.call(this);this.fragment&&this.fragment.unbind()},unrender:function(n){this.rendered&&(this.fragment&&this.fragment.unrender(n),this.rendered=!1)},update:function(){var n,t;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null);this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null);this.rendered&&(n=this.parentFragment.getNode(),t=this.parentFragment.findNextNode(this),n.insertBefore(this.docFrag,t))}};iut=dnt;rut=new h("detach");uut=gnt;fut=nti;eut=tti;out=iti;sut=rti;hut=uti;var fti=function(n,t,i,r){var u=n.root,f=n.keypath;r?u.viewmodel.smartUpdate(f,t,r):u.viewmodel.mark(f)},dc=[],su=["pop","push","reverse","shift","sort","splice","unshift"],cut,ne,gc;su.forEach(function(t){var i=function(){for(var o,s,r,u,f=arguments.length,e=Array(f),i=0;i<f;i++)e[i]=arguments[i];for(o=ly(this,t,e),s=Array.prototype[t].apply(this,arguments),n.start(),this._ractive.setting=!0,u=this._ractive.wrappers.length;u--;)r=this._ractive.wrappers[u],n.addRactive(r.root),fti(r,this,t,o);return n.end(),this._ractive.setting=!1,s};it(dc,t,{value:i})});cut={};cut.__proto__?(ne=function(n){n.__proto__=dc},gc=function(n){n.__proto__=Array.prototype}):(ne=function(n){for(var i,t=su.length;t--;)i=su[t],it(n,i,{value:dc[i],configurable:!0})},gc=function(n){for(var t=su.length;t--;)delete n[su[t]]});ne.unpatch=gc;nl=ne;te={filter:function(n){return f(n)&&(!n._ractive||!n._ractive.setting)},wrap:function(n,t,i){return new tl(n,t,i)}};tl=function(n,i,r){this.root=n;this.value=i;this.keypath=t(r);i._ractive||(it(i,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),nl(i));i._ractive.instances[n._guid]||(i._ractive.instances[n._guid]=0,i._ractive.instances.push(n));i._ractive.instances[n._guid]+=1;i._ractive.wrappers.push(this)};tl.prototype={get:function(){return this.value},teardown:function(){var u,i,r,t,n;if(u=this.value,i=u._ractive,r=i.wrappers,t=i.instances,i.setting)return!1;if(n=r.indexOf(this),n===-1)throw new Error(il);if(r.splice(n,1),r.length){if(t[this.root._guid]-=1,!t[this.root._guid]){if(n=t.indexOf(this.root),n===-1)throw new Error(il);t.splice(n,1)}}else delete u._ractive,nl.unpatch(this.value)}};il="Something went wrong in a rather interesting way";lut=/^\s*[0-9]+\s*$/;rl=function(n){return lut.test(n)?[]:{}};try{Object.defineProperty({},"test",{value:0});er={filter:function(n,i,r){var e,u;return i?(i=t(i),(e=r.viewmodel.wrapped[i.parent.str])&&!e.magic)?!1:(u=r.viewmodel.get(i.parent),f(u)&&/^[0-9]+$/.test(i.lastKey))?!1:u&&(typeof u=="object"||typeof u=="function"):!1},wrap:function(n,t,i){return new ul(n,t,i)}};ul=function(n,i,r){var f,u,e;if(r=t(r),this.magic=!0,this.ractive=n,this.keypath=r,this.value=i,this.prop=r.lastKey,f=r.parent,this.obj=f.isRoot?n.viewmodel.data:n.viewmodel.get(f),u=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),u&&u.set&&(e=u.set._ractiveWrappers)){e.indexOf(this)===-1&&e.push(this);return}eti(this,i,u)};ul.prototype={get:function(){return this.value},reset:function(t){if(!this.updating)return this.updating=!0,this.obj[this.prop]=t,n.addRactive(this.ractive),this.ractive.viewmodel.mark(this.keypath,{keepExistingWrapper:!0}),this.updating=!1,!0},set:function(n,t){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=rl(n),this.updating=!1),this.obj[this.prop][n]=t)},teardown:function(){var t,i,u,n,r;if(this.updating)return!1;(t=Object.getOwnPropertyDescriptor(this.obj,this.prop),i=t&&t.set,i)&&(n=i._ractiveWrappers,r=n.indexOf(this),r!==-1&&n.splice(r,1),n.length||(u=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=u))}}}catch(wot){er=!1}er&&(aut={filter:function(n,t,i){return er.filter(n,t,i)&&te.filter(n)},wrap:function(n,t,i){return new fl(n,t,i)}},fl=function(n,t,i){this.value=t;this.magic=!0;this.magicWrapper=er.wrap(n,t,i);this.arrayWrapper=te.wrap(n,t,i)},fl.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown();this.magicWrapper.teardown()},reset:function(n){return this.magicWrapper.reset(n)}});vut=oti;ie={};but=lti;nft=vti;tft=yti;el=function(n,t){this.computation=n;this.viewmodel=n.viewmodel;this.ref=t;this.root=this.viewmodel.ractive;this.parentFragment=this.root.component&&this.root.component.parentFragment};el.prototype={resolve:function(n){this.computation.softDeps.push(n);this.computation.unresolvedDeps[n.str]=null;this.viewmodel.register(n,this.computation,"computed")}};re=function(n,t){this.key=n;this.getter=t.getter;this.setter=t.setter;this.hardDeps=t.deps||[];this.softDeps=[];this.unresolvedDeps={};this.depValues={};this._dirty=this._firstRun=!0};re.prototype={constructor:re,init:function(n){var i=this,t;this.viewmodel=n;this.bypass=!0;t=n.get(this.key);n.clearCache(this.key.str);this.bypass=!1;this.setter&&t!==undefined&&this.set(t);this.hardDeps&&this.hardDeps.forEach(function(t){return n.register(t,i,"computed")})},invalidate:function(){this._dirty=!0},get:function(){var n=this,i,r,t=!1,u;if(this.getting)return u="The "+this.key.str+" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`",ia(u),this.value;if(this.getting=!0,this._dirty){if(!this._firstRun&&(this.hardDeps.length||this.softDeps.length)?[this.hardDeps,this.softDeps].forEach(function(i){var r,u,f;if(!t)for(f=i.length;f--;)if(r=i[f],u=n.viewmodel.get(r),!lt(u,n.depValues[r.str])){n.depValues[r.str]=u;t=!0;return}}):t=!0,t){this.viewmodel.capture();try{this.value=this.getter()}catch(f){o('Failed to compute "%s"',this.key.str);ta(f.stack||f);this.value=void 0}i=this.viewmodel.release();r=this.updateDependencies(i);r&&[this.hardDeps,this.softDeps].forEach(function(t){t.forEach(function(t){n.depValues[t.str]=n.viewmodel.get(t)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value},set:function(n){if(this.setting){this.value=n;return}if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter(n)},updateDependencies:function(t){for(var i,f,e,u=this.softDeps,r=u.length;r--;)i=u[r],t.indexOf(i)===-1&&(f=!0,this.viewmodel.unregister(i,this,"computed"));for(r=t.length;r--;)i=t[r],u.indexOf(i)!==-1||this.hardDeps&&this.hardDeps.indexOf(i)!==-1||(f=!0,pti(this.viewmodel,i)&&!this.unresolvedDeps[i.str]?(e=new el(this,i.str),t.splice(r,1),this.unresolvedDeps[i.str]=e,n.addUnresolved(e)):this.viewmodel.register(i,this,"computed"));return f&&(this.softDeps=t.slice()),f}};ift=wti;var rft={FAILED_LOOKUP:!0},bti=dti,kti={};uft=nii;fft=tii;ol=function(n,t){this.localKey=n;this.keypath=t.keypath;this.origin=t.origin;this.deps=[];this.unresolved=[];this.resolved=!1};ol.prototype={forceResolution:function(){this.keypath=this.localKey;this.setup()},get:function(n,t){return this.resolved?this.origin.get(this.map(n),t):undefined},getValue:function(){return this.keypath?this.origin.get(this.keypath):undefined},initViewmodel:function(n){this.local=n;this.setup()},map:function(n){return typeof this.keypath===undefined?this.localKey:n.replace(this.localKey,this.keypath)},register:function(n,t,i){this.deps.push({keypath:n,dep:t,group:i});this.resolved&&this.origin.register(this.map(n),t,i)},resolve:function(n){this.keypath!==undefined&&this.unbind(!0);this.keypath=n;this.setup()},set:function(n,t){this.resolved||this.forceResolution();this.origin.set(this.map(n),t)},setup:function(){var n=this;this.keypath!==undefined&&(this.resolved=!0,this.deps.length&&(this.deps.forEach(function(t){var i=n.map(t.keypath);if(n.origin.register(i,t.dep,t.group),t.dep.setValue)t.dep.setValue(n.origin.get(i));else if(t.dep.invalidate)t.dep.invalidate();else throw new Error("An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");}),this.origin.mark(this.keypath)))},setValue:function(n){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,n)},unbind:function(n){var t=this;(n||delete this.local.mappings[this.localKey],this.resolved)&&(this.deps.forEach(function(n){t.origin.unregister(t.map(n.keypath),n.dep,n.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker))},unregister:function(n,t,i){var r,u;if(this.resolved){for(r=this.deps,u=r.length;u--;)if(r[u].dep===t){r.splice(u,1);break}this.origin.unregister(this.map(n),t,i)}}};eft=iii;var rii=function(n,t){var r,i,u;return r={},i=0,n.map(function(n,f){var e,o,s;o=i;s=t.length;do{if(e=t.indexOf(n,o),e===-1)return u=!0,-1;o=e+1}while(r[e]&&o<s);return e===i&&(i+=1),e!==f&&(u=!0),r[e]=!0,e})},uii=fii,sl={};oft=sii;sft=cii;hft=lii;cft=aii;var yii=wii,pii={implicit:!0},lft={noCascade:!0};aft=kii;vft=dii;hl=function(n){var s=n.adapt,r=n.data,h=n.ractive,o=n.computed,f=n.mappings,i,e;this.ractive=h;this.adaptors=s;this.onchange=n.onchange;this.cache={};this.cacheMap=u(null);this.deps={computed:u(null),"default":u(null)};this.depsMap={computed:u(null),"default":u(null)};this.patternObservers=[];this.specials=u(null);this.wrapped=u(null);this.computations=u(null);this.captureGroups=[];this.unresolvedImplicitDependencies=[];this.changes=[];this.implicitChanges={};this.noCascade={};this.data=r;this.mappings=u(null);for(i in f)this.map(t(i),f[i]);if(r)for(i in r)(e=this.mappings[i])&&e.getValue()===undefined&&e.setValue(r[i]);for(i in o)f&&i in f&&st("Cannot map to a computed property ('%s')",i),this.compute(t(i),o[i]);this.ready=!0};hl.prototype={adapt:vut,applyChanges:but,capture:nft,clearCache:tft,compute:ift,get:bti,init:uft,map:fft,mark:eft,merge:uii,register:oft,release:sft,reset:hft,set:cft,smartUpdate:yii,teardown:aft,unregister:vft};cl.prototype={constructor:cl,begin:function(n){this.inProcess[n._guid]=!0},end:function(n){var t=n.parent;t&&this.inProcess[t._guid]?yft(this.queue,t).push(n):pft(this,n);delete this.inProcess[n._guid]}};wft=/\$\{([^\}]+)\}/g;var iri=new h("construct"),rri=new h("config"),kft=new cl("init"),uri=0,fri=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],al=eri;dft.prototype={bubble:function(){this.dirty||(this.dirty=!0,n.addView(this))},update:function(){this.callback(this.fragment.getValue());this.dirty=!1},rebind:function(n,t){this.fragment.rebind(n,t)},unbind:function(){this.fragment.unbind()}};gft=function(n,t,i,r,e){var s,y,c,h,w,p={},l={},a={},v,b=[];for(y=n.parentFragment,c=n.root,e=e||{},si(p,e),e.content=r||[],p[""]=e.content,t.defaults.el&&o("The <%s/> component has a default `el` property; it has been disregarded",n.name),h=y;h;){if(h.owner.type===du){w=h.owner.container;break}h=h.parent}return i&&Object.keys(i).forEach(function(t){var r=i[t],u,e;if(typeof r=="string")u=uf(r),l[t]=u?u.value:r;else if(r===0)l[t]=!0;else if(f(r))ari(r)?(a[t]={origin:n.root.viewmodel,keypath:undefined},e=lri(n,r[0],function(n){n.isSpecial?v?s.set(t,n.value):(l[t]=n.value,delete a[t]):v?s.viewmodel.mappings[t].resolve(n):a[t].keypath=n})):e=new dft(n,r,function(n){v?s.set(t,n):l[t]=n}),b.push(e);else throw new Error("erm wut");}),s=u(t.prototype),al(s,{el:null,append:!0,data:l,partials:e,magic:c.magic||t.defaults.magic,modifyArrays:c.modifyArrays,adapt:c.adapt},{parent:c,component:n,container:w,mappings:a,inlinePartials:p,cssIds:y.cssIds}),v=!0,n.resolvers=b,s};net=function(n){for(var i,t=n.root;t;)(i=t._liveComponentQueries["_"+n.name])&&i.push(n.instance),t=t.parent};tet=pri;iet=wri;ret=bri;uet=kri;fet=dri;eet=new h("teardown");oet=nui;vl=function(n,t){this.init(n,t)};vl.prototype={detach:iut,find:uut,findAll:fut,findAllComponents:eut,findComponent:out,findNextNode:sut,firstNode:hut,init:tet,rebind:iet,render:ret,toString:uet,unbind:fet,unrender:oet};set=vl;yl=function(n){this.type=li;this.value=n.template.c};yl.prototype={detach:lf,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(n){n&&this.node.parentNode.removeChild(this.node)}};pl=function(t){var u,r,i,s;this.type=du;this.container=u=t.parentFragment.root;this.component=r=u.component;this.container=u;this.containerFragment=t.parentFragment;this.parentFragment=r.parentFragment;i=this.name=t.template.n||"";s=u._inlinePartials[i];s||(o('Could not find template for partial "'+i+'"',{ractive:t.root}),s=[]);this.fragment=new e({owner:this,root:u.parent,template:s,pElement:this.containerFragment.pElement});f(r.yielders[i])?r.yielders[i].push(this):r.yielders[i]=[this];n.scheduleTask(function(){if(r.yielders[i].length>1)throw new Error("A component template can only have one {{yield"+(i?" "+i:"")+"}} declaration at a time");})};pl.prototype={detach:function(){return this.fragment.detach()},find:function(n){return this.fragment.find(n)},findAll:function(n,t){return this.fragment.findAll(n,t)},findComponent:function(n){return this.fragment.findComponent(n)},findAllComponents:function(n,t){return this.fragment.findAllComponents(n,t)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(n){return this.fragment.getValue(n)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(n){this.fragment.unrender(n);v(this.component.yielders[this.name],this)},rebind:function(n,t){this.fragment.rebind(n,t)},toString:function(){return this.fragment.toString()}};wl=function(n){this.declaration=n.template.a};wl.prototype={init:a,render:a,unrender:a,teardown:a,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};het=tui;cet=rui;aet=uui;vet=fui;yet=sui;pet=cui;e=function(n){this.init(n)};e.prototype={bubble:ed,detach:od,find:sd,findAll:hd,findAllComponents:cd,findComponent:ld,findNextNode:ad,firstNode:vd,getArgsList:yd,getNode:pd,getValue:wd,init:het,rebind:cet,registerIndexRef:function(n){var t=this.registeredIndexRefs;t.indexOf(n)===-1&&t.push(n)},render:aet,toString:vet,unbind:yet,unregisterIndexRef:function(n){var t=this.registeredIndexRefs;t.splice(t.indexOf(n),1)},unrender:pet};var lui=yui,aui=["template","partials","components","decorators","events"],vui=new h("reset");wet=function(t,i){function r(n,i,u){u&&u.partials[t]||n.forEach(function(n){n.type===ku&&n.getPartialName()===t&&i.push(n);n.fragment&&r(n.fragment.items,i,u);f(n.fragments)?r(n.fragments,i,u):f(n.items)?r(n.items,i,u):n.type===ip&&n.instance&&r(n.instance.fragment.items,i,n.instance);n.type===dr&&(f(n.attributes)&&r(n.attributes,i,u),f(n.conditionalAttributes)&&r(n.conditionalAttributes,i,u))})}var u,e=[];return r(this.fragment.items,e),this.partials[t]=i,u=n.start(this,!0),e.forEach(function(n){n.value=undefined;n.setValue(t)}),n.end(),u};bet=pui;ket=ii("reverse");det=wui;var bui=ii("shift"),kui=ii("sort"),dui=ii("splice"),gui=nfi;not=tfi;tot=new h("teardown");iot=rfi;bl=ufi;rot=ffi;uot=new h("unrender");var efi=ii("unshift"),ofi=hfi,sfi=new h("update");if(fot=cfi,eot={add:oa,animate:nv,detach:iv,find:uv,findAll:cv,findAllComponents:lv,findComponent:av,findContainer:vv,findParent:yv,fire:wv,get:bv,insert:dv,merge:ty,observe:fy,observeOnce:ey,off:yht,on:hy,once:cy,pop:ght,push:nct,render:ict,reset:lui,resetPartial:wet,resetTemplate:bet,reverse:ket,set:det,shift:bui,sort:kui,splice:dui,subtract:gui,teardown:not,toggle:iot,toHTML:bl,toHtml:bl,unrender:rot,unshift:efi,update:ofi,updateModel:fot},oot=function(n,t,i){return i||afi(n,t)?function(){var r="_super"in this,u=this._super,i;return this._super=t,i=n.apply(this,arguments),r&&(this._super=u),i}:n},sot=vfi,hot=cot,aot=function(n){var t={},i,r;return!n||!(i=n._ractive)?t:(t.ractive=i.root,t.keypath=i.keypath.str,t.index={},(r=ir(i.proxy.parentFragment))&&(t.index=ir.resolve(r)),t)},s=function(n){if(!(this instanceof s))return new s(n);al(this,n)},vot={DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:hot},getNodeInfo:{value:aot},parse:{value:ff},Promise:{value:pt},svg:{value:ue},magic:{value:hu},VERSION:{value:"0.7.1"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:pot},events:{writable:!0,value:{}},interpolators:{writable:!0,value:vr},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},oi(s,vot),s.prototype=si(eot,kl),s.prototype.constructor=s,s.defaults=s.prototype,ct="function",typeof Date.now!==ct||typeof String.prototype.trim!==ct||typeof Object.keys!==ct||typeof Array.prototype.indexOf!==ct||typeof Array.prototype.forEach!==ct||typeof Array.prototype.map!==ct||typeof Array.prototype.filter!==ct||typeof window!="undefined"&&typeof addEventListener!==ct)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return s});
//# sourceMappingURL=ractive.min.js.map
